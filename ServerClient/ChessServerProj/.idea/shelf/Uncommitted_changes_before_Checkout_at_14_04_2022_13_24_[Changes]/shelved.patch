Index: src/ver14/SharedClasses/Threads/ErrorHandling/MyError.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ver14.SharedClasses.Threads.ErrorHandling;\r\n\r\nimport ver14.SharedClasses.networking.AppSocket;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class MyError extends Error {\r\n\r\n    public final ErrorType type;\r\n    private final Map<ContextType, ErrorContext> context;\r\n\r\n    public MyError(Throwable throwable) {\r\n        super(throwable);\r\n\r\n        this.type = ErrorType.UnKnown;\r\n        this.context = new HashMap<>();\r\n    }\r\n\r\n    public MyError(ErrorType type) {\r\n        this(type.name(), type);\r\n    }\r\n\r\n    public MyError(String message, ErrorType type) {\r\n        super(message);\r\n        this.type = type;\r\n        context = new HashMap<>();\r\n    }\r\n\r\n    public static MyError AppSocket(boolean isRead, AppSocket appSocket, Throwable source) {\r\n        return new MyError(isRead ? ErrorType.AppSocketRead : ErrorType.AppSocketWrite) {{\r\n            addContext(appSocket);\r\n            initCause(source);\r\n        }};\r\n    }\r\n\r\n    public void addContext(ErrorContext context) {\r\n        this.context.put(context.contextType(), context);\r\n    }\r\n\r\n    public String getHandledStr() {\r\n//        return toString();\r\n        return type + (getCause() == null ? \"\" : \"  \" + getCause().getMessage());\r\n    }\r\n\r\n\r\n    @Override\r\n    public String toString() {\r\n\r\n        return \"MyError{\" +\r\n                \"\" + getStackTrace()[0] + \"\\n\" +\r\n//                \"error=\" + errToString(this) +\r\n                \"type=\" + type +\r\n                \", context=\" + context +\r\n                \", source=\" + errToString(getCause()) +\r\n                '}';\r\n    }\r\n\r\n    public static String errToString(Throwable error) {\r\n        if (error == null) {\r\n            return \"\";\r\n        }\r\n        String toStr;\r\n        if (error instanceof MyError myError)\r\n            toStr = myError.superToString();\r\n        else toStr = error + \"\";\r\n        StringBuilder errMsg = new StringBuilder(\">> \" + toStr + \"\\n\");\r\n        for (StackTraceElement element : error.getStackTrace())\r\n            errMsg.append(\">>> \").append(element).append(\"\\n\");\r\n        return errMsg.toString();\r\n    }\r\n\r\n    private String superToString() {\r\n        return super.toString();\r\n    }\r\n\r\n    public ErrorContext getContext(ContextType contextType) {\r\n        return context.get(contextType);\r\n    }\r\n\r\n    public static class DisconnectedError extends MyError {\r\n        public DisconnectedError() {\r\n            this(\"\");\r\n        }\r\n\r\n        public DisconnectedError(String message) {\r\n            super(message, ErrorType.Disconnected);\r\n        }\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/ver14/SharedClasses/Threads/ErrorHandling/MyError.java b/src/ver14/SharedClasses/Threads/ErrorHandling/MyError.java
--- a/src/ver14/SharedClasses/Threads/ErrorHandling/MyError.java	
+++ b/src/ver14/SharedClasses/Threads/ErrorHandling/MyError.java	
@@ -1,46 +1,27 @@
 package ver14.SharedClasses.Threads.ErrorHandling;
 
-import ver14.SharedClasses.networking.AppSocket;
-
-import java.util.HashMap;
-import java.util.Map;
-
 public class MyError extends Error {
-
-    public final ErrorType type;
-    private final Map<ContextType, ErrorContext> context;
+    private final Context<?> context;
 
     public MyError(Throwable throwable) {
         super(throwable);
-
-        this.type = ErrorType.UnKnown;
-        this.context = new HashMap<>();
+        this.context = new Context.UnKnownContext() {
+        };
     }
 
-    public MyError(ErrorType type) {
-        this(type.name(), type);
+    public MyError(Context<?> context) {
+        this(context.getDescription(), context);
     }
 
-    public MyError(String message, ErrorType type) {
+    public MyError(String message, Context<?> context) {
         super(message);
-        this.type = type;
-        context = new HashMap<>();
-    }
-
-    public static MyError AppSocket(boolean isRead, AppSocket appSocket, Throwable source) {
-        return new MyError(isRead ? ErrorType.AppSocketRead : ErrorType.AppSocketWrite) {{
-            addContext(appSocket);
-            initCause(source);
-        }};
+        this.context = context;
     }
 
-    public void addContext(ErrorContext context) {
-        this.context.put(context.contextType(), context);
-    }
 
     public String getHandledStr() {
 //        return toString();
-        return type + (getCause() == null ? "" : "  " + getCause().getMessage());
+        return context.getDescription() + (getCause() == null ? "" : "  " + getCause().getMessage());
     }
 
 
@@ -50,7 +31,6 @@
         return "MyError{" +
                 "" + getStackTrace()[0] + "\n" +
 //                "error=" + errToString(this) +
-                "type=" + type +
                 ", context=" + context +
                 ", source=" + errToString(getCause()) +
                 '}';
@@ -74,8 +54,8 @@
         return super.toString();
     }
 
-    public ErrorContext getContext(ContextType contextType) {
-        return context.get(contextType);
+    public ErrorContext getContext(Context context) {
+        return this.context.get(context);
     }
 
     public static class DisconnectedError extends MyError {
Index: src/ver14/SharedClasses/Threads/ErrorHandling/ErrorHandler.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ver14.SharedClasses.Threads.ErrorHandling;\r\n\r\nimport java.util.ArrayList;\r\n\r\n/**\r\n * The interface Error handler.\r\n */\r\npublic interface ErrorHandler {\r\n    ArrayList<Long> dontThrowIds = new ArrayList<>();\r\n\r\n    /**\r\n     * catches anything that might get thrown\r\n     *\r\n     * @param runnable the runnable\r\n     * @return did the runnable throw\r\n     */\r\n    static boolean ignore(ThrowingRunnable runnable) {\r\n        boolean ret;\r\n        synchronized (dontThrowIds) {\r\n            dontThrowIds.add(Thread.currentThread().getId());\r\n        }\r\n        try {\r\n            runnable.run();\r\n            ret = false;\r\n        } catch (Throwable t) {\r\n            ret = true;\r\n        }\r\n        synchronized (dontThrowIds) {\r\n            dontThrowIds.remove(Thread.currentThread().getId());\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    static boolean canThrow() {\r\n        synchronized (dontThrowIds) {\r\n            return !dontThrowIds.contains(Thread.currentThread().getId());\r\n        }\r\n    }\r\n\r\n    void handle(MyError err);\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorHandler.java b/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorHandler.java
--- a/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorHandler.java	
+++ b/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorHandler.java	
@@ -5,7 +5,7 @@
 /**
  * The interface Error handler.
  */
-public interface ErrorHandler {
+public interface ErrorHandler<T> {
     ArrayList<Long> dontThrowIds = new ArrayList<>();
 
     /**
@@ -37,5 +37,5 @@
         }
     }
 
-    void handle(MyError err);
+    void handle(MyError err, T obj);
 }
Index: src/ver14/SharedClasses/Threads/ErrorHandling/ErrorManager.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ver14.SharedClasses.Threads.ErrorHandling;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic final class ErrorManager {\r\n\r\n    private static final Map<ErrorType, ErrorHandler> map = new HashMap<>();\r\n    private static EnvManager envManager = null;\r\n\r\n    private ErrorManager() {\r\n    }\r\n\r\n    public static void setEnvManager(EnvManager manager) {\r\n        envManager = manager;\r\n    }\r\n\r\n    public static void setHandler(ErrorType type, ErrorHandler handler) {\r\n        map.put(type, handler);\r\n    }\r\n\r\n    public static void handle(MyError error) {\r\n        if (envManager == null)\r\n            throw error;\r\n        if (map.containsKey(error.type)) {\r\n            envManager.handledErr(error);\r\n            map.get(error.type).handle(error);\r\n        } else {\r\n            envManager.criticalErr(error);\r\n        }\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorManager.java b/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorManager.java
--- a/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorManager.java	
+++ b/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorManager.java	
@@ -5,7 +5,7 @@
 
 public final class ErrorManager {
 
-    private static final Map<ErrorType, ErrorHandler> map = new HashMap<>();
+    private static final Map<Class<?>, ErrorHandler> map = new HashMap<>();
     private static EnvManager envManager = null;
 
     private ErrorManager() {
@@ -15,7 +15,7 @@
         envManager = manager;
     }
 
-    public static void setHandler(ErrorType type, ErrorHandler handler) {
+    public static <T> void setHandler(Class<T> type, ErrorHandler<T> handler) {
         map.put(type, handler);
     }
 
Index: src/ver14/SharedClasses/Threads/ErrorHandling/ErrorType.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorType.java b/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorType.java
deleted file mode 100644
--- a/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorType.java	
+++ /dev/null	
@@ -1,14 +0,0 @@
-package ver14.SharedClasses.Threads.ErrorHandling;
-
-public enum ErrorType {
-    UnKnown,
-    DB,
-    Model(ContextType.Game),
-    AppSocketWrite(ContextType.AppSocket),
-    AppSocketRead(ContextType.AppSocket), Disconnected();
-    public final ContextType[] contextTypes;
-
-    ErrorType(ContextType... contextTypes) {
-        this.contextTypes = contextTypes;
-    }
-}
Index: src/ver14/SharedClasses/Threads/ErrorHandling/ContextType.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/ver14/SharedClasses/Threads/ErrorHandling/ContextType.java b/src/ver14/SharedClasses/Threads/ErrorHandling/ContextType.java
deleted file mode 100644
--- a/src/ver14/SharedClasses/Threads/ErrorHandling/ContextType.java	
+++ /dev/null	
@@ -1,7 +0,0 @@
-package ver14.SharedClasses.Threads.ErrorHandling;
-
-public enum ContextType {
-    GameSession, Game, Player, AppSocket
-
-
-}
Index: src/ver14/DB/DB.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ver14.DB;\r\n\r\n//import org.apache.commons.lang.SerializationUtils;\r\n\r\nimport org.apache.commons.lang3.SerializationUtils;\r\nimport ver14.SharedClasses.DBActions.Condition;\r\nimport ver14.SharedClasses.DBActions.DBRequest.DBRequest;\r\nimport ver14.SharedClasses.DBActions.DBRequest.PreMadeRequest;\r\nimport ver14.SharedClasses.DBActions.DBResponse.DBResponse;\r\nimport ver14.SharedClasses.DBActions.DBResponse.StatusResponse;\r\nimport ver14.SharedClasses.DBActions.DBResponse.TableDBResponse;\r\nimport ver14.SharedClasses.DBActions.RequestBuilder;\r\nimport ver14.SharedClasses.DBActions.Statements.CustomStatement;\r\nimport ver14.SharedClasses.DBActions.Statements.Selection;\r\nimport ver14.SharedClasses.DBActions.Table.Col;\r\nimport ver14.SharedClasses.DBActions.Table.Table;\r\nimport ver14.SharedClasses.Game.GameSettings;\r\nimport ver14.SharedClasses.Game.GameSetup.AiParameters;\r\nimport ver14.SharedClasses.Game.SavedGames.ArchivedGameInfo;\r\nimport ver14.SharedClasses.Game.SavedGames.GameInfo;\r\nimport ver14.SharedClasses.Game.SavedGames.UnfinishedGame;\r\nimport ver14.SharedClasses.IDsGenerator;\r\nimport ver14.SharedClasses.RegEx;\r\nimport ver14.SharedClasses.Sync.SyncedItems;\r\nimport ver14.SharedClasses.Sync.SyncedListType;\r\nimport ver14.SharedClasses.Threads.ErrorHandling.ErrorType;\r\nimport ver14.SharedClasses.Threads.ErrorHandling.MyError;\r\nimport ver14.SharedClasses.Utils.StrUtils;\r\n\r\nimport java.io.File;\r\nimport java.io.Serializable;\r\nimport java.sql.*;\r\nimport java.util.Date;\r\nimport java.util.*;\r\n\r\n/**\r\n * DB - SQLמחלקת שירות לביצוע חיבור למסד נתונים מסוג אקסס וביצוע משפטי .\r\n * ---------------------------------------------------------------------------\r\n * by Ilan Peretz(ilanperets@gmail.com) 5/11/2021\r\n */\r\npublic class DB {\r\n    public static final String APP_DB_FILE_PATH = \"/assets/db.accdb\";\r\n    public static final String TIE_STR = RequestBuilder.TIE_STR;\r\n\r\n    public static void delUser(String un, String pw) {\r\n        runUpdate(\"DELETE FROM users WHERE 'un'='%s' AND 'pw'='%s'\".formatted(un, pw));\r\n    }\r\n\r\n    public static synchronized StatusResponse runUpdate(String sql) {\r\n        sql = StrUtils.clean(sql);\r\n        return runUpdate(new DBRequest(new CustomStatement(DBRequest.Type.Update, sql)));\r\n    }\r\n\r\n    /**\r\n     * Run SQL Update Statement - INSERT, DELETE, UPDATE הפעולה מריצה משפט עדכון\r\n     */\r\n    public static synchronized StatusResponse runUpdate(DBRequest request) {\r\n        Connection con = getConnection();\r\n        DBResponse.Status status;\r\n        int updatedRows = 0;\r\n        try {\r\n            Statement st = con.createStatement();\r\n            updatedRows = st.executeUpdate(request.getRequest());\r\n            status = DBResponse.Status.SUCCESS;\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            status = DBResponse.Status.ERROR;\r\n        }\r\n        return new StatusResponse(status, request, updatedRows);\r\n    }\r\n\r\n    /**\r\n     * הפעולה מבצעת חיבור למסד הנתונים שהנתיב אליו מתקבל כפרמטר\r\n     *\r\n     * @param dbFileRelativePath הנתיב היחסי למסד הנתונים שאליו רוצים לקבל חיבור\r\n     * @return מחזיר חיבור למסד הנתונים\r\n     */\r\n    public static Connection getConnection(String... dbFileRelativePath) {\r\n        String dbPath = APP_DB_FILE_PATH;\r\n        if (dbFileRelativePath.length != 0)\r\n            dbPath = dbFileRelativePath[0];\r\n\r\n        //#####################################################################\r\n        dbPath = \"src\" + dbPath;\r\n        //dbPath = dbPath.substring(dbPath.lastIndexOf(\"/\")+1); //TurnON for JAR\r\n        //#####################################################################\r\n\r\n        // dbURL: Access DB Driver Name + dbPath\r\n        String dbURL = \"jdbc:ucanaccess://\" + new File(dbPath).getAbsolutePath();\r\n\r\n        // create the connection object to db\r\n\r\n        try {\r\n            return DriverManager.getConnection(dbURL, \"\", \"\");\r\n        } catch (SQLException e) {\r\n            e.printStackTrace();\r\n            throw new Error(e);\r\n        }\r\n    }\r\n\r\n    // =======================================================================\r\n    // CUSTOM METHODS HERE . . .\r\n    // =======================================================================\r\n\r\n    public static boolean isUsernameExists(String un) {\r\n        return select(Table.Users, Condition.equals(Col.Username, un)).isAnyData();\r\n    }\r\n\r\n    private static DBResponse select(Table selectFromTable, Condition condition, String... select) {\r\n        return select(selectFromTable.name(), condition, select);\r\n    }\r\n\r\n    /**\r\n     * @param condition\r\n     * @param select    the cols to select. default is *\r\n     * @return\r\n     */\r\n    private static DBResponse select(String selectFrom, Condition condition, String... select) {\r\n\r\n        Selection selection = new Selection(selectFrom, condition, select);\r\n        return runQuery(new DBRequest(selection));\r\n\r\n    }\r\n\r\n    public static synchronized DBResponse runQuery(DBRequest request) {\r\n        try {\r\n            Connection con = getConnection();\r\n            Statement st = con.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_READ_ONLY);\r\n\r\n            ResultSet rs = st.executeQuery(request.getRequest());\r\n            return request.getBuilder().createResponse(rs, request);\r\n        } catch (SQLException e) {\r\n//            e.printStackTrace();\r\n            throw new MyError(ErrorType.DB) {{\r\n                initCause(e);\r\n            }};\r\n        }\r\n\r\n    }\r\n\r\n\r\n    public static ArrayList<UserDetails> getAllUserDetails() {\r\n        DBRequest request = new DBRequest(new Selection(Table.Users, new Object[]{Col.Username, Col.Password}));\r\n\r\n        TableDBResponse res = (TableDBResponse) request(request);\r\n\r\n        ArrayList<UserDetails> ret = new ArrayList<>();\r\n        assert res != null;\r\n        for (String[] row : res.getRows()) {\r\n            ret.add(new UserDetails(row[0], row[1]));\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        try {\r\n\r\n            System.out.println(request(PreMadeRequest.ChangeProfilePic.createBuilder().build(\"bezalel6\", \"https://stackoverflow.com/questions/4275525/regex-for-urls-without-http-https-ftp\")));\r\n\r\n//            clearGames();\r\n\r\n//            System.out.println(runQuery(\"SELECT format(DATEADD('s', CLng(Games.SAVEDDATETIME), #01/01/1970 00:00:00 AM#),'short time') as a FROM Games where format(DATEADD('s', CLng(Games.SAVEDDATETIME), #01/01/1970 00:00:00 AM#),'short time') between '16:00' AND '17:00'\"));\r\n//            System.out.println(runQuery(\"SELECT WeekDay(DATEADD('s', CLng(Games.SAVEDDATETIME), #01/01/1970 00:00:00 AM#)) FROM Games\"));\r\n//            System.out.println(runQuery(\"SELECT DATEADD('s', CLng(Games.SavedDateTime),#01/01/1970 00:00:00 AM#) FROM Games\"));\r\n//            System.out.println(request(RequestBuilder.games().build(\"bezalel6\", null, null)));\r\n//            System.out.println(request(RequestBuilder.statsByTimeOfDay().build(\"bezalel5\")));\r\n//            for (int i = 0; i < 24; i++) {\r\n//                System.out.println(String.format(\"%02d:00\", i));\r\n//            }\r\n//            createRndGames(30);\r\n//            addGames(\"bezalel6\");\r\n//            clearGames();\r\n//            System.out.println(request(PreMadeRequest.TopPlayers.createBuilder().build(5)));\r\n//            System.out.println(request(RequestBuilder.top().build(5)));\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public static void clearGames() {\r\n        runUpdate(\"DELETE FROM \" + Table.UnfinishedGames.name());\r\n        runUpdate(\"DELETE FROM \" + Table.Games.name());\r\n    }\r\n\r\n    public static DBResponse request(DBRequest request) {\r\n        DBResponse response;\r\n//        System.out.println(\"requesting \" + SqlFormatter.format(request.getRequest()).replaceAll(\"\\\\[ \", \"[\").replaceAll(\" ]\", \"]\"));\r\n        System.out.println(request.getRequest());\r\n        response = switch (request.type) {\r\n            case Update -> runUpdate(request);\r\n            case Query -> runQuery(request);\r\n        };\r\n        if (response == null)\r\n            return null;\r\n        if (request.getSubRequest() != null)\r\n            response.setAddedRes(request(request.getSubRequest()));\r\n\r\n        return response;\r\n    }\r\n\r\n    /**\r\n     * בדיקה האם יוזר ששם המשתמש והסיסמה המתקבלים כפרמטירים קיים בטבלת היוזרים\r\n     *\r\n     * @param un שם המשתמש של היוזר\r\n     * @param pw הסיסמה של היוזר\r\n     * @return מחזיר אמת אם קיים יוזר כזה ושקר אחרת\r\n     */\r\n    public static boolean isUserExists(String un, String pw) {\r\n        Condition condition = Condition.equals(Col.Username, un);\r\n        condition.add(Condition.equals(Col.Password, pw), Condition.Relation.AND);\r\n        return select(Table.Users, condition).isAnyData();\r\n    }\r\n\r\n    private static void resetGamesTables() {\r\n        runUpdate(\"delete from \" + Table.Games.name());\r\n        runUpdate(\"delete from \" + Table.UnfinishedGames.name());\r\n    }\r\n\r\n    private static void addUsers() {\r\n        for (int i = 0; i < 10; i++) {\r\n            String un = \"bezalel\" + i;\r\n            addUser(un, \"openSesame\");\r\n//            addGames(un);\r\n        }\r\n        createRndGames(20);\r\n    }\r\n\r\n    public static SyncedItems<GameInfo> getUnfinishedGames(String username) {\r\n        SyncedItems<GameInfo> gameInfos = new SyncedItems<>(SyncedListType.RESUMABLE_GAMES);\r\n        if (RegEx.DontSaveGame.check(username))\r\n            return gameInfos;\r\n        Condition condition = Condition.equals(Col.Player1, username);\r\n        condition.add(Condition.equals(Col.Player2, username), Condition.Relation.OR);\r\n\r\n        TableDBResponse rs = (TableDBResponse) select(Table.UnfinishedGames, condition, Col.SavedGame.colName());\r\n        String[][] rows = rs.getRows();\r\n        for (int rowIndex = 0; rowIndex < rows.length; rowIndex++) {\r\n            UnfinishedGame gameInfo = unstringify(rs.getCell(rowIndex, Col.SavedGame));\r\n            gameInfos.add(gameInfo);\r\n        }\r\n        return gameInfos;\r\n    }\r\n\r\n    private static <T extends Serializable> T unstringify(String str) {\r\n        str = StrUtils.clean(str);\r\n        str = str.replace(\"[\", \"\").replace(\"]\", \"\");\r\n        String[] split = str.split(\",\");\r\n        byte[] arr = new byte[split.length];\r\n        for (int i = 0; i < arr.length; i++) {\r\n            arr[i] = Byte.parseByte(split[i].trim());\r\n        }\r\n        return (T) SerializationUtils.deserialize(arr);\r\n    }\r\n\r\n    private static void printAllTables() {\r\n        for (Table table : Table.values()) {\r\n            printTable(table);\r\n        }\r\n    }\r\n\r\n    public static void printTable(Table table) {\r\n        System.out.println(select(table, null));\r\n    }\r\n\r\n    public static void addUser(String un, String pw) {\r\n        insert(Table.Users, un, pw);\r\n    }\r\n\r\n    private static void insertAtDate(Table table, Date date, String... values) {\r\n        Object[] vals = new ArrayList<>(List.of(values)) {{\r\n            add((date.getTime() / 1000) + \"\");\r\n        }}.toArray();\r\n        assert vals.length == table.cols.length;\r\n        runUpdate(\"INSERT INTO %s\\nVALUES %s\".formatted(table.tableAndValues(), Table.escapeValues(vals, true, true)));\r\n    }\r\n\r\n    private static void insert(Table table, String... values) {\r\n        insertAtDate(table, new Date(), values);\r\n    }\r\n\r\n    private static String stringify(Serializable obj) {\r\n        return Arrays.toString(SerializationUtils.serialize(obj));\r\n    }\r\n\r\n    private static void addGames(String winner) {\r\n        addGames(winner, \"bezalel7\");\r\n    }\r\n\r\n    private static void addGames(String winner, String loser) {\r\n        for (int i = 0; i < 5; i++) {\r\n            saveGameResult(new ArchivedGameInfo(new Random().nextInt() + \"\", winner, loser, null, winner, new Stack<>()));\r\n        }\r\n    }\r\n\r\n    public static void saveGameResult(ArchivedGameInfo gameInfo) {\r\n        if (isGameIdExists(gameInfo.gameId, Table.Games))\r\n            deleteGame(Table.Games, gameInfo.gameId);\r\n        insertAtDate(Table.Games, gameInfo.getCreatedAt(), gameInfo.gameId, gameInfo.creatorUsername, gameInfo.opponentUsername, stringify(gameInfo), gameInfo.getWinner());\r\n    }\r\n\r\n    public static void saveUnFinishedGame(UnfinishedGame gameInfo) {\r\n        if (isGameIdExists(gameInfo.gameId, Table.UnfinishedGames))\r\n            deleteGame(Table.UnfinishedGames, gameInfo.gameId);\r\n        insertAtDate(Table.UnfinishedGames, gameInfo.getCreatedAt(), gameInfo.gameId, gameInfo.creatorUsername, gameInfo.opponentUsername, stringify(gameInfo), gameInfo.gameSettings.getPlayerToMove().name());\r\n\r\n    }\r\n\r\n    public static boolean isGameIdExists(String gameID) {\r\n        return isGameIdExists(gameID, Table.Games) || isGameIdExists(gameID, Table.UnfinishedGames);\r\n    }\r\n\r\n    public static boolean isGameIdExists(String gameID, Table gamesTable) {\r\n        return select(gamesTable, Condition.equals(Col.GameID, gameID)).isAnyData();\r\n    }\r\n\r\n    public static UnfinishedGame loadUnfinishedGame(String gameID) {\r\n        return unstringify(((TableDBResponse) select(Table.UnfinishedGames, Condition.equals(Col.GameID, gameID))).getCell(0, Col.SavedGame));\r\n    }\r\n\r\n    public static void deleteUnfinishedGame(UnfinishedGame game) {\r\n        deleteGame(Table.UnfinishedGames, game.gameId);\r\n    }\r\n\r\n    public static void deleteGame(Table table, String gameId) {\r\n        runUpdate(\"DELETE FROM %s WHERE GameID='%s'\".formatted(table.name(), gameId));\r\n    }\r\n\r\n    public static void createRndGames(int numOfGames) {\r\n        ArrayList<UserDetails> details = getAllUserDetails();\r\n        IDsGenerator generator = new IDsGenerator();\r\n        Random rnd = new Random();\r\n        for (int i = 0; i < numOfGames; i++) {\r\n            String un = details.get(rnd.nextInt(details.size())).username;\r\n            boolean isVsAi = rnd.nextBoolean();\r\n            GameSettings gameSettings = new GameSettings();\r\n            String oppUn, winner;\r\n            if (isVsAi) {\r\n                oppUn = AiParameters.AiType.MyAi.toString();\r\n                gameSettings.initDefault1vAi();\r\n            } else {\r\n                int index;\r\n                do {\r\n                    index = rnd.nextInt(details.size());\r\n                } while (un.equals(details.get(index).username));\r\n                oppUn = details.get(index).username;\r\n                gameSettings.initDefault1v1();\r\n\r\n            }\r\n            winner = switch (rnd.nextInt(3)) {\r\n                case 0 -> oppUn;\r\n                case 1 -> un;\r\n                case 2 -> TIE_STR;\r\n                default -> \"\";\r\n            };\r\n            ArchivedGameInfo gameInfo = new ArchivedGameInfo(generator.generate(), un, oppUn, gameSettings, winner, new Stack<>());\r\n\r\n            long now = new Date().getTime();\r\n            long start = new Date(0).getTime();\r\n            long d = (Math.abs(rnd.nextLong()) % (now - start)) + start;\r\n            gameInfo.setCreatedAt(new Date(d));\r\n\r\n            saveGameResult(gameInfo);\r\n        }\r\n\r\n\r\n    }\r\n\r\n    public static String getProfilePic(String username) {\r\n        TableDBResponse response = (TableDBResponse) select(Table.Users, Condition.equals(Col.Username, username), Col.ProfilePic.colName());\r\n        return response.isAnyData() ? response.getFirstRow()[0] : null;\r\n    }\r\n\r\n    public static record UserDetails(String username, String password) {\r\n\r\n        @Override\r\n        public String toString() {\r\n            return\r\n                    \"username='\" + username + '\\'' +\r\n                            \", password='\" + password + '\\'';\r\n        }\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/ver14/DB/DB.java b/src/ver14/DB/DB.java
--- a/src/ver14/DB/DB.java	
+++ b/src/ver14/DB/DB.java	
@@ -23,7 +23,6 @@
 import ver14.SharedClasses.RegEx;
 import ver14.SharedClasses.Sync.SyncedItems;
 import ver14.SharedClasses.Sync.SyncedListType;
-import ver14.SharedClasses.Threads.ErrorHandling.ErrorType;
 import ver14.SharedClasses.Threads.ErrorHandling.MyError;
 import ver14.SharedClasses.Utils.StrUtils;
 
Index: src/ver14/SharedClasses/Threads/ErrorHandling/ErrorContext.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ver14.SharedClasses.Threads.ErrorHandling;\r\n\r\npublic interface ErrorContext {\r\n    ContextType contextType();\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorContext.java b/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorContext.java
--- a/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorContext.java	
+++ b/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorContext.java	
@@ -1,5 +1,5 @@
 package ver14.SharedClasses.Threads.ErrorHandling;
 
 public interface ErrorContext {
-    ContextType contextType();
+    Context contextType();
 }
Index: ../ChessClientProj/.idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"ArtifactsWorkspaceSettings\">\r\n    <artifacts-to-build>\r\n      <artifact name=\"ChessClientProj:jar2\" />\r\n    </artifacts-to-build>\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"d2b132dc-6d84-44dd-b331-6216fc04c4e9\" name=\"Changes\" comment=\"dragging and overlay\">\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/runConfigurations/Client.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/runConfigurations/Client.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/out/artifacts/ChessClientProj_jar2/ChessClientProj.jar\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/out/artifacts/ChessClientProj_jar2/ChessClientProj.jar\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/Client.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/Client.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/Sound/SoundManager.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/Sound/SoundManager.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/view/Dialog/Cards/DialogCard.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/view/Dialog/Cards/DialogCard.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/view/Dialog/Dialog.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/view/Dialog/Dialog.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/view/Dialog/Dialogs/BackOkInterface.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/view/Dialog/Dialogs/BackOkInterface.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/view/Dialog/Dialogs/BackOkPnl.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/view/Dialog/Dialogs/BackOkPnl.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/view/Dialog/Dialogs/GameSelection/Cards/GameCreation/StartFromPosition.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/view/Dialog/Dialogs/GameSelection/Cards/GameCreation/StartFromPosition.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/view/Dialog/Dialogs/SimpleDialogs/PromotionDialog.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/view/Dialog/Dialogs/SimpleDialogs/PromotionDialog.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/view/Dialog/Dialogs/SimpleDialogs/SimpleDialog.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/view/Dialog/Dialogs/SimpleDialogs/SimpleDialog.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/view/View.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/view/View.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessServerProj/.idea/runConfigurations/Server.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessServerProj/.idea/runConfigurations/Server.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessServerProj/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessServerProj/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessServerProj/src/assets/Stockfish/stockfish_14.1_win_x64_avx2/stockfish_14.1_src/src/types.h\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessServerProj/src/assets/Stockfish/stockfish_14.1_win_x64_avx2/stockfish_14.1_src/src/types.h\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/Model/AttackedSquares.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/Model/AttackedSquares.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/Model/Eval/Eval.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/Model/Eval/Eval.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/Model/Model.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/Model/Model.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/Model/MoveGenerator/MoveGenerator.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/Model/MoveGenerator/MoveGenerator.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Game/moves/BasicMove.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Game/moves/BasicMove.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Game/moves/Move.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Game/moves/Move.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Game/moves/MoveAnnotation.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Game/moves/MoveAnnotation.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Game/moves/MovesList.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Game/moves/MovesList.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Game/pieces/PieceType.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Game/pieces/PieceType.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Utils/StrUtils.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Utils/StrUtils.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/messages/Message.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/messages/Message.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/networking/AppSocket.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/networking/AppSocket.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/networking/MessagesHandler.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/networking/MessagesHandler.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/Tests/EvalTests.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/Tests/EvalTests.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/Tests/MoveGenerationTest.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/Tests/MoveGenerationTest.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/game/Game.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/game/Game.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/players/PlayerNet/PlayerNet.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessServerProj/src/ver14/players/PlayerNet/PlayerNet.java\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"Enum\" />\r\n        <option value=\"Interface\" />\r\n        <option value=\"Class\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"FormatOnSaveOptions\">\r\n    <option name=\"myRunOnSave\" value=\"true\" />\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_BRANCH_BY_REPOSITORY\">\r\n      <map>\r\n        <entry key=\"$PROJECT_DIR$/../..\" value=\"new_graph\" />\r\n      </map>\r\n    </option>\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$/../..\" />\r\n  </component>\r\n  <component name=\"GitSEFilterConfiguration\">\r\n    <file-type-list>\r\n      <filtered-out-file-type name=\"LOCAL_BRANCH\" />\r\n      <filtered-out-file-type name=\"REMOTE_BRANCH\" />\r\n      <filtered-out-file-type name=\"TAG\" />\r\n      <filtered-out-file-type name=\"COMMIT_BY_MESSAGE\" />\r\n    </file-type-list>\r\n  </component>\r\n  <component name=\"HighlightingSettingsPerFile\">\r\n    <setting file=\"file://$PROJECT_DIR$/src/ver9/view/Dialog/Dialog.java\" root0=\"FORCE_HIGHLIGHTING\" />\r\n    <setting file=\"file://$PROJECT_DIR$/src/ver9/view/View.java\" root0=\"FORCE_HIGHLIGHTING\" />\r\n    <setting file=\"file://$PROJECT_DIR$/src/ver9/view/IconManager.java\" root0=\"FORCE_HIGHLIGHTING\" />\r\n    <setting file=\"file://$PROJECT_DIR$/src/ver4/Client.java\" root0=\"FORCE_HIGHLIGHTING\" />\r\n    <setting file=\"file://$PROJECT_DIR$/src/ver9/view/Board/BoardButton.java\" root0=\"FORCE_HIGHLIGHTING\" />\r\n    <setting file=\"file://$PROJECT_DIR$/src/ver9/view/Board/BoardPanel.java\" root0=\"FORCE_HIGHLIGHTING\" />\r\n    <setting file=\"file://$PROJECT_DIR$/src/ver9/view/GameIconsGenerator.java\" root0=\"FORCE_HIGHLIGHTING\" />\r\n  </component>\r\n  <component name=\"MarkdownSettingsMigration\">\r\n    <option name=\"stateVersion\" value=\"1\" />\r\n  </component>\r\n  <component name=\"NamedScopeManager\">\r\n    <scope name=\"Unnamed\" pattern=\"src:*..*\" />\r\n  </component>\r\n  <component name=\"OptimizeOnSaveOptions\">\r\n    <option name=\"myRunOnSave\" value=\"true\" />\r\n  </component>\r\n  <component name=\"ProjectId\" id=\"20lvZL7Nm4unxYEn90rC60tfmw0\" />\r\n  <component name=\"ProjectLevelVcsManager\" settingsEditedManually=\"true\">\r\n    <ConfirmationsSetting value=\"2\" id=\"Add\" />\r\n  </component>\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">\r\n    <property name=\"ASKED_ADD_EXTERNAL_FILES\" value=\"true\" />\r\n    <property name=\"Downloaded.Files.Path.Enabled\" value=\"false\" />\r\n    <property name=\"Repository.Attach.Annotations\" value=\"false\" />\r\n    <property name=\"Repository.Attach.JavaDocs\" value=\"false\" />\r\n    <property name=\"Repository.Attach.Sources\" value=\"false\" />\r\n    <property name=\"RunOnceActivity.OpenProjectViewOnStart\" value=\"true\" />\r\n    <property name=\"RunOnceActivity.ShowReadmeOnStart\" value=\"true\" />\r\n    <property name=\"SHARE_PROJECT_CONFIGURATION_FILES\" value=\"true\" />\r\n    <property name=\"last.edited.regexp\" value=\"https://www.google.com\" />\r\n    <property name=\"last_directory_selection\" value=\"$PROJECT_DIR$/src/ver8/view\" />\r\n    <property name=\"last_opened_file_path\" value=\"$PROJECT_DIR$/src/assets/SoundEffects\" />\r\n    <property name=\"project.structure.last.edited\" value=\"Artifacts\" />\r\n    <property name=\"project.structure.proportion\" value=\"0.15\" />\r\n    <property name=\"project.structure.side.proportion\" value=\"0.2\" />\r\n    <property name=\"rearrange.code.on.save\" value=\"true\" />\r\n    <property name=\"settings.editor.selected.configurable\" value=\"JavaDoc\" />\r\n  </component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"CreateClassDialog.RecentsKey\">\r\n      <recent name=\"ver8.view.Dialog\" />\r\n      <recent name=\"ver6.view.List\" />\r\n    </key>\r\n    <key name=\"CopyFile.RECENT_KEYS\">\r\n      <recent name=\"E:\\SharedCo\\Chess\\ServerClient\\ChessClientProj\\src\\assets\\SoundEffects\" />\r\n      <recent name=\"E:\\SharedCo\\Chess\\ServerClient\\ChessClientProj\\src\\ver14\" />\r\n      <recent name=\"C:\\Users\\bezal\\Documents\\GitHub\\Chess\\ServerClient\\ChessClientProj\\src\\ver14\\view\\IconManager\\Icons\" />\r\n      <recent name=\"E:\\SharedCo\\Chess\\ServerClient\\ChessClientProj\\src\\libs\" />\r\n      <recent name=\"C:\\Users\\bezal\\Documents\\GitHub\\Chess\\ServerClient\\ChessClientProj\\src\\ver13\" />\r\n    </key>\r\n    <key name=\"MoveFile.RECENT_KEYS\">\r\n      <recent name=\"C:\\Users\\bezal\\Documents\\GitHub\\SharedCo\\IdeaProjects\\ChessClientProj\\src\\assets\\Statistics\\StatisticsIcon\" />\r\n      <recent name=\"C:\\Users\\bezal\\Documents\\GitHub\\SharedCo\\IdeaProjects\\ChessClientProj\\src\\assets\\SettingsIcon\" />\r\n    </key>\r\n    <key name=\"ExtractSuperBase.RECENT_KEYS\">\r\n      <recent name=\"ver14.SharedClasses.DBActions.DBResponse\" />\r\n    </key>\r\n    <key name=\"MoveClassesOrPackagesDialog.RECENTS_KEY\">\r\n      <recent name=\"ver7.view\" />\r\n      <recent name=\"ver5.view.game_select\" />\r\n    </key>\r\n    <key name=\"MoveInnerDialog.RECENTS_KEY\">\r\n      <recent name=\"ver14.view.SidePanel\" />\r\n      <recent name=\"ver12.SharedClasses.DBActions\" />\r\n      <recent name=\"ver10.SharedClasses.DBActions\" />\r\n      <recent name=\"ver10.view.Dialog\" />\r\n      <recent name=\"ver10.view.IconManager\" />\r\n    </key>\r\n    <key name=\"CopyClassDialog.RECENTS_KEY\">\r\n      <recent name=\"ver8.view.Dialog.Selectables\" />\r\n      <recent name=\"ver3.view\" />\r\n      <recent name=\"SharedClasses.messages\" />\r\n      <recent name=\"ver2login\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"RunManager\" selected=\"Application.Client\">\r\n    <configuration name=\"Client\" type=\"Application\" factoryName=\"Application\" singleton=\"false\">\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"ver14.Client\" />\r\n      <module name=\"ChessClientProj\" />\r\n      <option name=\"PROGRAM_PARAMETERS\" value=\"-ea address=localhost:1234\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"Client\" type=\"Application\" factoryName=\"Application\" singleton=\"false\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"ver13.Client\" />\r\n      <module name=\"ChessClientProj\" />\r\n      <option name=\"VM_PARAMETERS\" value=\"-ea\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"ver13.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"Client\" type=\"Application\" factoryName=\"Application\" singleton=\"false\">\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"ver12.Client\" />\r\n      <module name=\"ChessClientProj\" />\r\n      <option name=\"VM_PARAMETERS\" value=\"-ea\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"CreateClients\" type=\"Application\" factoryName=\"Application\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"ver14.CreateClients\" />\r\n      <module name=\"ChessClientProj\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"ver14.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"Graph\" type=\"Application\" factoryName=\"Application\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"ver14.view.Graph.Graph\" />\r\n      <module name=\"ChessClientProj\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"ver14.view.Graph.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"ShapesHelper\" type=\"Application\" factoryName=\"Application\" nameIsGenerated=\"true\">\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"ver14.view.Shapes.ShapesHelper\" />\r\n      <module name=\"ChessClientProj\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"ver14.view.Shapes.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"SoundManager\" type=\"Application\" factoryName=\"Application\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"ver14.Sound.SoundManager\" />\r\n      <module name=\"ChessClientProj\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"ver14.Sound.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"StrUtils\" type=\"Application\" factoryName=\"Application\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"ver14.SharedClasses.Utils.StrUtils\" />\r\n      <module name=\"ChessClientProj\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"ver14.SharedClasses.Utils.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <list>\r\n      <item itemvalue=\"Application.Client\" />\r\n      <item itemvalue=\"Application.ShapesHelper\" />\r\n      <item itemvalue=\"Application.CreateClients\" />\r\n      <item itemvalue=\"Application.SoundManager\" />\r\n      <item itemvalue=\"Application.Graph\" />\r\n      <item itemvalue=\"Application.StrUtils\" />\r\n    </list>\r\n    <recent_temporary>\r\n      <list>\r\n        <item itemvalue=\"Application.CreateClients\" />\r\n        <item itemvalue=\"Application.StrUtils\" />\r\n        <item itemvalue=\"Application.Graph\" />\r\n        <item itemvalue=\"Application.SoundManager\" />\r\n      </list>\r\n    </recent_temporary>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"d2b132dc-6d84-44dd-b331-6216fc04c4e9\" name=\"Changes\" comment=\"\" />\r\n      <created>1636632044717</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1636632044717</updated>\r\n    </task>\r\n    <task id=\"LOCAL\u200E00001\" summary=\"created message dialogs\">\r\n      <created>1647575755850</created>\r\n      <option name=\"number\" value=\"LOCAL\u200E00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL\u200E00001\" />\r\n      <updated>1647575755850</updated>\r\n    </task>\r\n    <task id=\"LOCAL\u200E00002\" summary=\"created message dialogs\">\r\n      <created>1647576017130</created>\r\n      <option name=\"number\" value=\"LOCAL\u200E00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL\u200E00002\" />\r\n      <updated>1647576017130</updated>\r\n    </task>\r\n    <task id=\"LOCAL\u200E00003\" summary=\"dragging and overlay\">\r\n      <created>1649627589753</created>\r\n      <option name=\"number\" value=\"LOCAL\u200E00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL\u200E00003\" />\r\n      <updated>1649627589753</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"4\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State />\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <option name=\"ADD_EXTERNAL_FILES_SILENTLY\" value=\"true\" />\r\n    <MESSAGE value=\"moved dialogs to view\" />\r\n    <MESSAGE value=\"created message dialogs\" />\r\n    <MESSAGE value=\"dragging and overlay\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"dragging and overlay\" />\r\n  </component>\r\n  <component name=\"XDebuggerManager\">\r\n    <breakpoint-manager>\r\n      <breakpoints>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.lang.NullPointerException\" package=\"java.lang\">\r\n            <option name=\"NOTIFY_CAUGHT\" value=\"false\" />\r\n          </properties>\r\n          <option name=\"timeStamp\" value=\"4\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.lang.ClassNotFoundException\" package=\"java.lang\">\r\n            <option name=\"NOTIFY_CAUGHT\" value=\"false\" />\r\n          </properties>\r\n          <option name=\"timeStamp\" value=\"5\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.lang.AssertionError\" package=\"java.lang\" />\r\n          <option name=\"timeStamp\" value=\"13\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.lang.ArrayIndexOutOfBoundsException\" package=\"java.lang\" />\r\n          <option name=\"timeStamp\" value=\"26\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.lang.IllegalArgumentException\" package=\"java.lang\">\r\n            <option name=\"NOTIFY_CAUGHT\" value=\"false\" />\r\n          </properties>\r\n          <option name=\"timeStamp\" value=\"27\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.lang.StringIndexOutOfBoundsException\" package=\"java.lang\">\r\n            <option name=\"NOTIFY_CAUGHT\" value=\"false\" />\r\n          </properties>\r\n          <option name=\"timeStamp\" value=\"38\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.lang.IndexOutOfBoundsException\" package=\"java.lang\">\r\n            <option name=\"NOTIFY_CAUGHT\" value=\"false\" />\r\n          </properties>\r\n          <option name=\"timeStamp\" value=\"46\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.lang.IllegalStateException\" package=\"java.lang\">\r\n            <option name=\"NOTIFY_CAUGHT\" value=\"false\" />\r\n          </properties>\r\n          <option name=\"timeStamp\" value=\"56\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.lang.ClassCastException\" package=\"java.lang\" />\r\n          <option name=\"timeStamp\" value=\"63\" />\r\n        </breakpoint>\r\n        <breakpoint type=\"java-exception\">\r\n          <properties class=\"java.net.SocketException\" package=\"java.net\" />\r\n          <option name=\"timeStamp\" value=\"64\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.io.InvalidClassException\" package=\"java.io\">\r\n            <catch-class-filters>\r\n              <class-filter pattern=\"ver14.SharedClasses.networking.AppSocket\" />\r\n            </catch-class-filters>\r\n            <option name=\"catch-filters-enabled\" value=\"true\" />\r\n          </properties>\r\n          <option name=\"timeStamp\" value=\"65\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.io.NotSerializableException\" package=\"java.io\" />\r\n          <option name=\"timeStamp\" value=\"68\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.util.ConcurrentModificationException\" package=\"java.util\">\r\n            <option name=\"NOTIFY_CAUGHT\" value=\"false\" />\r\n          </properties>\r\n          <option name=\"timeStamp\" value=\"73\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.io.UTFDataFormatException\" package=\"java.io\" />\r\n          <option name=\"timeStamp\" value=\"76\" />\r\n        </breakpoint>\r\n        <line-breakpoint enabled=\"true\" type=\"java-line\">\r\n          <url>file://$PROJECT_DIR$/src/ver7/view/View.java</url>\r\n          <line>295</line>\r\n          <option name=\"timeStamp\" value=\"57\" />\r\n        </line-breakpoint>\r\n        <line-breakpoint enabled=\"true\" type=\"java-line\">\r\n          <url>file://$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Threads/ThreadsManager.java</url>\r\n          <line>41</line>\r\n          <option name=\"timeStamp\" value=\"92\" />\r\n        </line-breakpoint>\r\n        <line-breakpoint enabled=\"true\" type=\"java-line\">\r\n          <url>file://$PROJECT_DIR$/src/ver14/view/MenuBar/ProfileMenu.java</url>\r\n          <line>40</line>\r\n          <option name=\"timeStamp\" value=\"96\" />\r\n        </line-breakpoint>\r\n      </breakpoints>\r\n      <default-breakpoints>\r\n        <breakpoint type=\"java-exception\">\r\n          <properties>\r\n            <option name=\"NOTIFY_CAUGHT\" value=\"false\" />\r\n          </properties>\r\n        </breakpoint>\r\n      </default-breakpoints>\r\n    </breakpoint-manager>\r\n    <pin-to-top-manager>\r\n      <pinned-members>\r\n        <PinnedItemInfo parentTag=\"java.io.ObjectInputStream$BlockDataInputStream\" memberName=\"din\" />\r\n      </pinned-members>\r\n    </pin-to-top-manager>\r\n  </component>\r\n  <component name=\"XSLT-Support.FileAssociations.UIState\">\r\n    <expand />\r\n    <select />\r\n  </component>\r\n  <component name=\"com.intellij.coverage.CoverageDataManagerImpl\">\r\n    <SUITE FILE_PATH=\"coverage/ChessClientProj$IconManager.ic\" NAME=\"IconManager Coverage Results\" MODIFIED=\"1649399580060\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"idea\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\">\r\n      <FILTER>ver14.view.IconManager.*</FILTER>\r\n    </SUITE>\r\n    <SUITE FILE_PATH=\"coverage/ChessClientProj$Client.ic\" NAME=\"Client Coverage Results\" MODIFIED=\"1649662473470\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"idea\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../ChessClientProj/.idea/workspace.xml b/../ChessClientProj/.idea/workspace.xml
--- a/../ChessClientProj/.idea/workspace.xml	
+++ b/../ChessClientProj/.idea/workspace.xml	
@@ -7,39 +7,20 @@
   </component>
   <component name="ChangeListManager">
     <list default="true" id="d2b132dc-6d84-44dd-b331-6216fc04c4e9" name="Changes" comment="dragging and overlay">
-      <change beforePath="$PROJECT_DIR$/.idea/runConfigurations/Client.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/runConfigurations/Client.xml" afterDir="false" />
+      <change afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Threads/ErrorHandling/Context.java" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/out/artifacts/ChessClientProj_jar2/ChessClientProj.jar" beforeDir="false" afterPath="$PROJECT_DIR$/out/artifacts/ChessClientProj_jar2/ChessClientProj.jar" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/Client.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/Client.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/Sound/SoundManager.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/Sound/SoundManager.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/view/Dialog/Cards/DialogCard.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/view/Dialog/Cards/DialogCard.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/view/Dialog/Dialog.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/view/Dialog/Dialog.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/view/Dialog/Dialogs/BackOkInterface.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/view/Dialog/Dialogs/BackOkInterface.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/view/Dialog/Dialogs/BackOkPnl.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/view/Dialog/Dialogs/BackOkPnl.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/view/Dialog/Dialogs/GameSelection/Cards/GameCreation/StartFromPosition.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/view/Dialog/Dialogs/GameSelection/Cards/GameCreation/StartFromPosition.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/view/Dialog/Dialogs/SimpleDialogs/PromotionDialog.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/view/Dialog/Dialogs/SimpleDialogs/PromotionDialog.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/view/Dialog/Dialogs/SimpleDialogs/SimpleDialog.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/view/Dialog/Dialogs/SimpleDialogs/SimpleDialog.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/view/View.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/view/View.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessServerProj/.idea/runConfigurations/Server.xml" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/.idea/runConfigurations/Server.xml" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/../ChessServerProj/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/assets/Stockfish/stockfish_14.1_win_x64_avx2/stockfish_14.1_src/src/types.h" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/assets/Stockfish/stockfish_14.1_win_x64_avx2/stockfish_14.1_src/src/types.h" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/Model/AttackedSquares.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/Model/AttackedSquares.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/Model/Eval/Eval.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/Model/Eval/Eval.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/Model/Model.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/Model/Model.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/Model/MoveGenerator/MoveGenerator.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/Model/MoveGenerator/MoveGenerator.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Game/moves/BasicMove.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Game/moves/BasicMove.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Game/moves/Move.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Game/moves/Move.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Game/moves/MoveAnnotation.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Game/moves/MoveAnnotation.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Game/moves/MovesList.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Game/moves/MovesList.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Game/pieces/PieceType.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Game/pieces/PieceType.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Utils/StrUtils.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Utils/StrUtils.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/messages/Message.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/messages/Message.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/DB/DB.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/DB/DB.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/Server.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/Server.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Threads/ErrorHandling/ContextType.java" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorContext.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorContext.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorHandler.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorHandler.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorManager.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorManager.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorType.java" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Threads/ErrorHandling/MyError.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/Threads/ErrorHandling/MyError.java" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/networking/AppSocket.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/networking/AppSocket.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/networking/MessagesHandler.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/SharedClasses/networking/MessagesHandler.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/Tests/EvalTests.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/Tests/EvalTests.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/Tests/MoveGenerationTest.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/Tests/MoveGenerationTest.java" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/game/Game.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/game/Game.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/players/PlayerNet/PlayerNet.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/players/PlayerNet/PlayerNet.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/../ChessServerProj/src/ver14/players/PlayerAI/PlayerAI.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessServerProj/src/ver14/players/PlayerAI/PlayerAI.java" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
Index: src/ver14/SharedClasses/networking/AppSocket.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ver14.SharedClasses.networking;\r\n\r\nimport ver14.SharedClasses.Callbacks.MessageCallback;\r\nimport ver14.SharedClasses.Threads.ErrorHandling.*;\r\nimport ver14.SharedClasses.Threads.ThreadsManager;\r\nimport ver14.SharedClasses.messages.Message;\r\nimport ver14.SharedClasses.messages.MessageType;\r\n\r\nimport java.io.IOException;\r\nimport java.io.ObjectInputStream;\r\nimport java.io.ObjectOutputStream;\r\nimport java.net.Socket;\r\n\r\n/**\r\n * AppSocket -טיפוס המייצג שקע תקשורת המאפשר העברת הודעות ברשת בין השרת ללקוח .\r\n * ---------------------------------------------------------------------------\r\n * by Ilan Peretz(ilanperets@gmail.com) 10/11/2021\r\n */\r\npublic class AppSocket extends ThreadsManager.MyThread implements ErrorContext {\r\n    static {\r\n//        ErrorManager.setHandler(MyError.ErrorType.AppSocketWrite, err -> {\r\n//            AppSocket socket = (AppSocket) err.getContext(MyError.ContextType.AppSocket);\r\n//            socket.messagesHandler.receivedMessage(null);\r\n//        });\r\n        ErrorManager.setHandler(ErrorType.AppSocketRead, err -> {\r\n            AppSocket socket = (AppSocket) err.getContext(ContextType.AppSocket);\r\n            if (!socket.messagesHandler.isBye())\r\n                socket.messagesHandler.onDisconnected();\r\n\r\n        });\r\n        ErrorManager.setHandler(ErrorType.Disconnected, err -> {\r\n\r\n        });\r\n        ErrorManager.setHandler(ErrorType.AppSocketWrite, err -> {\r\n//            AppSocket socket = (AppSocket) err.getContext(ContextType.AppSocket);\r\n//            socket.messagesHandler.onDisconnected();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * The Msg socket.\r\n     */\r\n    protected final Socket msgSocket;           // Message socket\r\n    private final ObjectOutputStream msgOS;   // Output stream to SEND Messages\r\n    private final ObjectInputStream msgIS;    // Input stream to GET Messages\r\n    private MessagesHandler messagesHandler;\r\n    private boolean keepReading;\r\n    private boolean didDisconnect = false;\r\n\r\n    /**\r\n     * Instantiates a new App socket.\r\n     *\r\n     * @param ip   the ip\r\n     * @param port the port\r\n     * @throws IOException the io exception\r\n     */\r\n    public AppSocket(String ip, int port) throws IOException {\r\n        this(new Socket(ip, port));\r\n    }\r\n\r\n    /**\r\n     * Instantiates a new App socket.\r\n     *\r\n     * @param socket the socket\r\n     * @throws IOException the io exception\r\n     */\r\n    public AppSocket(Socket socket) throws IOException {\r\n        this.msgSocket = socket;\r\n        // Create MESSAGE streams. Output Stream must be created FIRST!\r\n        // ------------------------------------------------------------\r\n        msgOS = new ObjectOutputStream(socket.getOutputStream());\r\n        msgOS.flush();\r\n        msgIS = new ObjectInputStream(socket.getInputStream());\r\n    }\r\n\r\n    /**\r\n     * Request message.\r\n     *\r\n     * @param requestMsg the request msg\r\n     * @param onRes      the on res\r\n     */\r\n    public void requestMessage(Message requestMsg, MessageCallback onRes) {\r\n        assert messagesHandler != null;\r\n        messagesHandler.noBlockRequest(requestMsg, onRes);\r\n    }\r\n\r\n    /**\r\n     * Handled run.\r\n     */\r\n    @Override\r\n    protected void handledRun() {\r\n        assert messagesHandler != null;\r\n        keepReading = true;\r\n        while (keepReading) {\r\n            try {\r\n                Message msg = (Message) msgIS.readObject();\r\n                messagesHandler.receivedMessage(msg);\r\n            } catch (Exception e) {\r\n                didDisconnect = true;\r\n                if (!messagesHandler.isBye())\r\n                    throw MyError.AppSocket(true, this, e);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets messages handler.\r\n     *\r\n     * @return the messages handler\r\n     */\r\n    public MessagesHandler getMessagesHandler() {\r\n        return messagesHandler;\r\n    }\r\n\r\n    /**\r\n     * Sets messages handler.\r\n     *\r\n     * @param messagesHandler the messages handler\r\n     */\r\n    public void setMessagesHandler(MessagesHandler messagesHandler) {\r\n        this.messagesHandler = messagesHandler;\r\n    }\r\n\r\n    /**\r\n     * Respond.\r\n     *\r\n     * @param msg          the msg\r\n     * @param respondingTo the responding to\r\n     */\r\n    public void respond(Message msg, Message respondingTo) {\r\n        msg.setRespondingTo(respondingTo);\r\n        writeMessage(msg);\r\n    }\r\n\r\n    /**\r\n     * Write message.\r\n     *\r\n     * @param msg the msg\r\n     */\r\n    public synchronized void writeMessage(Message msg) {\r\n        if (!isConnected())\r\n            return;\r\n        if (msg.getMessageType() == MessageType.BYE)\r\n            messagesHandler.setBye();\r\n        try {\r\n            msgOS.writeObject(msg);\r\n            msgOS.flush(); // send object now! (dont wait)\r\n        } catch (Exception e) {\r\n            didDisconnect = true;\r\n            if (!messagesHandler.isBye())\r\n                throw MyError.AppSocket(false, this, e);\r\n//            ErrorHandler.thrown(ex);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Is connected boolean.\r\n     *\r\n     * @return the boolean\r\n     */\r\n    public boolean isConnected() {\r\n        return !didDisconnect && msgSocket != null && !msgSocket.isClosed() && !messagesHandler.isBye() && msgSocket.isConnected();\r\n    }\r\n\r\n\r\n    /**\r\n     * Close.\r\n     */\r\n    public void close() {\r\n        ErrorHandler.ignore(() -> {\r\n            keepReading = false;\r\n            if (messagesHandler != null) {\r\n                messagesHandler.interruptBlocking(new MyError(ErrorType.Disconnected));\r\n            }\r\n            msgSocket.close();  // will close the IS & OS streams\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Gets local address.\r\n     *\r\n     * @return the local address\r\n     */\r\n    public String getLocalAddress() {\r\n        return msgSocket.getLocalSocketAddress().toString().substring(1);\r\n    }\r\n\r\n    /**\r\n     * Gets remote address.\r\n     *\r\n     * @return the remote address\r\n     */\r\n    public String getRemoteAddress() {\r\n        return msgSocket.getRemoteSocketAddress().toString().substring(1);\r\n    }\r\n\r\n    /**\r\n     * Is closed boolean.\r\n     *\r\n     * @return the boolean\r\n     */\r\n    public boolean isClosed() {\r\n        return msgSocket != null && msgSocket.isClosed();\r\n    }\r\n\r\n    /**\r\n     * sending request and blocking til res\r\n     *\r\n     * @param requestMsg = \"can i have x message?\"\r\n     * @return message\r\n     */\r\n    public Message requestMessage(Message requestMsg) {\r\n        assert messagesHandler != null;\r\n        return messagesHandler.blockTilRes(requestMsg);\r\n    }\r\n\r\n    /**\r\n     * Stop reading.\r\n     */\r\n    public void stopReading() {\r\n        keepReading = false;\r\n        interruptListener(null);\r\n    }\r\n\r\n    /**\r\n     * Interrupt listener.\r\n     */\r\n    public void interruptListener(MyError err) {\r\n        messagesHandler.interruptBlocking(err);\r\n//        interrupt();\r\n    }\r\n\r\n    /**\r\n     * Context type my error . context type.\r\n     *\r\n     * @return the my error . context type\r\n     */\r\n    @Override\r\n    public ContextType contextType() {\r\n        return ContextType.AppSocket;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/ver14/SharedClasses/networking/AppSocket.java b/src/ver14/SharedClasses/networking/AppSocket.java
--- a/src/ver14/SharedClasses/networking/AppSocket.java	
+++ b/src/ver14/SharedClasses/networking/AppSocket.java	
@@ -23,7 +23,7 @@
 //            socket.messagesHandler.receivedMessage(null);
 //        });
         ErrorManager.setHandler(ErrorType.AppSocketRead, err -> {
-            AppSocket socket = (AppSocket) err.getContext(ContextType.AppSocket);
+            AppSocket socket = (AppSocket) err.getContext(Context.AppSocket);
             if (!socket.messagesHandler.isBye())
                 socket.messagesHandler.onDisconnected();
 
@@ -236,7 +236,7 @@
      * @return the my error . context type
      */
     @Override
-    public ContextType contextType() {
-        return ContextType.AppSocket;
+    public Context contextType() {
+        return Context.AppSocket;
     }
 }
Index: src/ver14/SharedClasses/Threads/ErrorHandling/Context.java
===================================================================
diff --git a/src/ver14/SharedClasses/Threads/ErrorHandling/Context.java b/src/ver14/SharedClasses/Threads/ErrorHandling/Context.java
new file mode 100644
--- /dev/null	
+++ b/src/ver14/SharedClasses/Threads/ErrorHandling/Context.java	
@@ -0,0 +1,28 @@
+package ver14.SharedClasses.Threads.ErrorHandling;
+
+public interface Context<T> {
+    default String getDescription() {
+        return getIdentifier();
+    }
+
+    default String getIdentifier() {
+        return get().getClass().getName();
+
+    }
+
+
+    T get();
+
+    interface UnKnownContext extends Context<String> {
+        @Override
+        default String getIdentifier() {
+            return "no context";
+        }
+
+        @Override
+        default String get() {
+            return null;
+        }
+    }
+
+}
Index: src/ver14/players/PlayerAI/PlayerAI.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ver14.players.PlayerAI;\r\n\r\nimport ver14.SharedClasses.Callbacks.QuestionCallback;\r\nimport ver14.SharedClasses.Game.GameSettings;\r\nimport ver14.SharedClasses.Game.GameSetup.AiParameters;\r\nimport ver14.SharedClasses.Game.evaluation.GameStatus;\r\nimport ver14.SharedClasses.Game.moves.Move;\r\nimport ver14.SharedClasses.Question;\r\nimport ver14.SharedClasses.Sync.SyncedItems;\r\nimport ver14.SharedClasses.Threads.ErrorHandling.ErrorType;\r\nimport ver14.SharedClasses.Threads.ErrorHandling.MyError;\r\nimport ver14.game.Game;\r\nimport ver14.players.Player;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\n/**\r\n * PlayerAI.\r\n * ---------------------------------------------------------------------------\r\n * by Ilan Peretz (ilanperets@gmail.com) 10/11/2021\r\n */\r\npublic abstract class PlayerAI extends Player {\r\n    private final static long safetyNet = 500;\r\n    private final AiParameters aiParameters;\r\n    protected Map<Question, Question.Answer> qNa = new HashMap<>();\r\n    long moveSearchTimeout;\r\n\r\n    public PlayerAI(AiParameters aiParameters) {\r\n        super(aiParameters.getAiType().toString());\r\n        this.aiParameters = aiParameters;\r\n\r\n    }\r\n\r\n    public static PlayerAI createPlayerAi(AiParameters aiParameters) {\r\n        return switch (aiParameters.getAiType()) {\r\n            case MyAi -> new MyAi(aiParameters);\r\n            case Stockfish -> new StockfishPlayer(aiParameters);\r\n        };\r\n    }\r\n\r\n    @Override\r\n    public void initGame(Game game) {\r\n        long time = Math.min(game.getGameTime().getTimeFormat(getPlayerColor()).timeInMillis, aiParameters.getMoveSearchTimeout().timeInMillis);\r\n        time -= safetyNet;\r\n        time = Math.max(0, time);\r\n        this.moveSearchTimeout = time;\r\n        super.initGame(game);\r\n    }\r\n\r\n    @Override\r\n    public void error(String error) {\r\n        interrupt(new MyError(error, ErrorType.UnKnown));\r\n    }\r\n\r\n    @Override\r\n    public void waitTurn() {\r\n    }\r\n\r\n    @Override\r\n    public void gameOver(GameStatus gameStatus) {\r\n    }\r\n\r\n    @Override\r\n    public void askQuestion(Question question, QuestionCallback onAns) {\r\n        if (qNa.containsKey(question)) {\r\n            onAns.callback(qNa.get(question));\r\n        } else {\r\n            super.askQuestion(question, onAns);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void updateByMove(Move move) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void cancelQuestion(Question question, String cause) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void interrupt(MyError error) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void waitForMatch() {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void drawOffered(QuestionCallback answerCallback) {\r\n        answerCallback.callback(Question.Answer.NO);\r\n    }\r\n\r\n    @Override\r\n    public GameSettings getGameSettings(SyncedItems<?> joinableGames, SyncedItems<?> resumableGames) {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public boolean isGuest() {\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAi() {\r\n        return true;\r\n    }\r\n\r\n    protected void setAnswer(Question question, Question.Answer answer) {\r\n        qNa.put(question, answer);\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/ver14/players/PlayerAI/PlayerAI.java b/src/ver14/players/PlayerAI/PlayerAI.java
--- a/src/ver14/players/PlayerAI/PlayerAI.java	
+++ b/src/ver14/players/PlayerAI/PlayerAI.java	
@@ -7,7 +7,6 @@
 import ver14.SharedClasses.Game.moves.Move;
 import ver14.SharedClasses.Question;
 import ver14.SharedClasses.Sync.SyncedItems;
-import ver14.SharedClasses.Threads.ErrorHandling.ErrorType;
 import ver14.SharedClasses.Threads.ErrorHandling.MyError;
 import ver14.game.Game;
 import ver14.players.Player;
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"ArtifactsWorkspaceSettings\">\r\n    <artifacts-to-build>\r\n      <artifact name=\"ChessServerProj:jar\" />\r\n    </artifacts-to-build>\r\n  </component>\r\n  <component name=\"AutoImportSettings\">\r\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"c8b696c4-dc4a-459e-b95c-014fc448a61e\" name=\"Changes\" comment=\"done profile pic\">\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessClientProj/.idea/runConfigurations/Client.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessClientProj/.idea/runConfigurations/Client.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessClientProj/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessClientProj/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessClientProj/out/artifacts/ChessClientProj_jar2/ChessClientProj.jar\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessClientProj/out/artifacts/ChessClientProj_jar2/ChessClientProj.jar\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessClientProj/src/ver14/Client.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessClientProj/src/ver14/Client.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessClientProj/src/ver14/Sound/SoundManager.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessClientProj/src/ver14/Sound/SoundManager.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Cards/DialogCard.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Cards/DialogCard.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialog.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialog.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialogs/BackOkInterface.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialogs/BackOkInterface.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialogs/BackOkPnl.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialogs/BackOkPnl.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialogs/GameSelection/Cards/GameCreation/StartFromPosition.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialogs/GameSelection/Cards/GameCreation/StartFromPosition.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialogs/SimpleDialogs/PromotionDialog.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialogs/SimpleDialogs/PromotionDialog.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialogs/SimpleDialogs/SimpleDialog.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialogs/SimpleDialogs/SimpleDialog.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/../ChessClientProj/src/ver14/view/View.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/../ChessClientProj/src/ver14/view/View.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/runConfigurations/Server.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/runConfigurations/Server.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/assets/Stockfish/stockfish_14.1_win_x64_avx2/stockfish_14.1_src/src/types.h\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/assets/Stockfish/stockfish_14.1_win_x64_avx2/stockfish_14.1_src/src/types.h\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/Model/AttackedSquares.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/Model/AttackedSquares.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/Model/Eval/Eval.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/Model/Eval/Eval.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/Model/Model.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/Model/Model.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/Model/MoveGenerator/MoveGenerator.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/Model/MoveGenerator/MoveGenerator.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/SharedClasses/Game/moves/BasicMove.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/SharedClasses/Game/moves/BasicMove.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/SharedClasses/Game/moves/Move.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/SharedClasses/Game/moves/Move.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/SharedClasses/Game/moves/MoveAnnotation.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/SharedClasses/Game/moves/MoveAnnotation.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/SharedClasses/Game/moves/MovesList.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/SharedClasses/Game/moves/MovesList.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/SharedClasses/Game/pieces/PieceType.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/SharedClasses/Game/pieces/PieceType.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/SharedClasses/Utils/StrUtils.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/SharedClasses/Utils/StrUtils.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/SharedClasses/messages/Message.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/SharedClasses/messages/Message.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/SharedClasses/networking/AppSocket.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/SharedClasses/networking/AppSocket.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/SharedClasses/networking/MessagesHandler.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/SharedClasses/networking/MessagesHandler.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/Tests/EvalTests.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/Tests/EvalTests.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/Tests/MoveGenerationTest.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/Tests/MoveGenerationTest.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/game/Game.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/game/Game.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/ver14/players/PlayerNet/PlayerNet.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/ver14/players/PlayerNet/PlayerNet.java\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"Enum\" />\r\n        <option value=\"Kotlin Class\" />\r\n        <option value=\"Interface\" />\r\n        <option value=\"Class\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"FormatOnSaveOptions\">\r\n    <option name=\"myRunOnSave\" value=\"true\" />\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_BRANCH_BY_REPOSITORY\">\r\n      <map>\r\n        <entry key=\"$PROJECT_DIR$/../..\" value=\"move_log\" />\r\n      </map>\r\n    </option>\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$/../..\" />\r\n  </component>\r\n  <component name=\"GitSEFilterConfiguration\">\r\n    <file-type-list>\r\n      <filtered-out-file-type name=\"LOCAL_BRANCH\" />\r\n      <filtered-out-file-type name=\"REMOTE_BRANCH\" />\r\n      <filtered-out-file-type name=\"TAG\" />\r\n      <filtered-out-file-type name=\"COMMIT_BY_MESSAGE\" />\r\n    </file-type-list>\r\n  </component>\r\n  <component name=\"GithubPullRequestsUISettings\">\r\n    <option name=\"recentNewPullRequestHead\">\r\n      <RepoCoordinatesHolder>\r\n        <option name=\"owner\" value=\"bezalel6\" />\r\n        <option name=\"repository\" value=\"Chess\" />\r\n      </RepoCoordinatesHolder>\r\n    </option>\r\n  </component>\r\n  <component name=\"HighlightingSettingsPerFile\">\r\n    <setting file=\"file://$PROJECT_DIR$/src/ver9/server/game/GameSession.java\" root0=\"FORCE_HIGHLIGHTING\" />\r\n    <setting file=\"file://$PROJECT_DIR$/src/ver9/server/players/Player.java\" root0=\"FORCE_HIGHLIGHTING\" />\r\n    <setting file=\"file://$PROJECT_DIR$/src/ver9/server/players/PlayerNet.java\" root0=\"FORCE_HIGHLIGHTING\" />\r\n    <setting file=\"file://$PROJECT_DIR$/src/ver9/server/Server.java\" root0=\"FORCE_HIGHLIGHTING\" />\r\n    <setting file=\"file://$PROJECT_DIR$/src/ver9/Tests.java\" root0=\"FORCE_HIGHLIGHTING\" />\r\n    <setting file=\"file://$PROJECT_DIR$/src/ver9/SharedClasses/messages/Message.java\" root0=\"FORCE_HIGHLIGHTING\" />\r\n    <setting file=\"file://$PROJECT_DIR$/src/ver9/server/DB/DB.java\" root0=\"FORCE_HIGHLIGHTING\" />\r\n    <setting file=\"file://$PROJECT_DIR$/src/ver9/model_classes/Bitboard.java\" root0=\"FORCE_HIGHLIGHTING\" />\r\n    <setting file=\"file://$PROJECT_DIR$/src/ver9/server/DB/Condition.java\" root0=\"FORCE_HIGHLIGHTING\" />\r\n  </component>\r\n  <component name=\"MarkdownSettingsMigration\">\r\n    <option name=\"stateVersion\" value=\"1\" />\r\n  </component>\r\n  <component name=\"NamedScopeManager\">\r\n    <order>\r\n      <scope name=\"MyScope\" />\r\n    </order>\r\n  </component>\r\n  <component name=\"OptimizeOnSaveOptions\">\r\n    <option name=\"myRunOnSave\" value=\"true\" />\r\n  </component>\r\n  <component name=\"ProjectId\" id=\"20lvWKUkTSaTPlIwkybX70l0e6x\" />\r\n  <component name=\"ProjectLevelVcsManager\" settingsEditedManually=\"true\">\r\n    <ConfirmationsSetting value=\"2\" id=\"Add\" />\r\n  </component>\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">\r\n    <property name=\"ASKED_ADD_EXTERNAL_FILES\" value=\"true\" />\r\n    <property name=\"Downloaded.Files.Path\" value=\"C:\\Users\\bezal\\Documents\\GitHub\\Chess\\ServerClient\\ChessServerProj\\src\\libs\" />\r\n    <property name=\"Downloaded.Files.Path.Enabled\" value=\"true\" />\r\n    <property name=\"Repository.Attach.Annotations\" value=\"false\" />\r\n    <property name=\"Repository.Attach.JavaDocs\" value=\"false\" />\r\n    <property name=\"Repository.Attach.Sources\" value=\"false\" />\r\n    <property name=\"RunOnceActivity.OpenProjectViewOnStart\" value=\"true\" />\r\n    <property name=\"RunOnceActivity.ShowReadmeOnStart\" value=\"true\" />\r\n    <property name=\"SHARE_PROJECT_CONFIGURATION_FILES\" value=\"true\" />\r\n    <property name=\"last.edited.regexp\" value=\"ssDatesdd\" />\r\n    <property name=\"last_opened_file_path\" value=\"$PROJECT_DIR$/src/assets\" />\r\n    <property name=\"project.structure.last.edited\" value=\"Artifacts\" />\r\n    <property name=\"project.structure.proportion\" value=\"0.15\" />\r\n    <property name=\"project.structure.side.proportion\" value=\"0.19885057\" />\r\n    <property name=\"rearrange.code.on.save\" value=\"true\" />\r\n    <property name=\"settings.editor.selected.configurable\" value=\"preferences.toDoOptions\" />\r\n    <property name=\"two.files.diff.last.used.file\" value=\"$PROJECT_DIR$/src/ver13/Model/Bitboard.java\" />\r\n  </component>\r\n  <component name=\"ReaderModeSettings\">\r\n    <option name=\"showLigatures\" value=\"true\" />\r\n  </component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"CopyFile.RECENT_KEYS\">\r\n      <recent name=\"C:\\Users\\bezal\\Documents\\GitHub\\Chess\\ServerClient\\ChessServerProj\\src\\assets\\dlls\" />\r\n      <recent name=\"C:\\Users\\bezal\\Documents\\GitHub\\Chess\\ServerClient\\ChessServerProj\\src\\libs\" />\r\n      <recent name=\"E:\\SharedCo\\Chess\\ServerClient\\ChessServerProj\\src\\ver14\" />\r\n      <recent name=\"C:\\Users\\bezal\\Documents\\GitHub\\Chess\\ServerClient\\ChessServerProj\\src\\ver13\" />\r\n      <recent name=\"E:\\SharedCo\\Chess\\ServerClient\\ChessServerProj\\src\\ver12\" />\r\n    </key>\r\n    <key name=\"MoveFile.RECENT_KEYS\">\r\n      <recent name=\"C:\\Users\\bezal\\Documents\\GitHub\\SharedCo\\IdeaProjects\\ChessServerProj\\src\" />\r\n      <recent name=\"E:\\SharedCo\\IdeaProjects\\ChessServerProj\\src\\main\\java\" />\r\n      <recent name=\"E:\\SharedCo\\IdeaProjects\\ChessServerProj\\src\\assets\\GameInfo\\\" />\r\n      <recent name=\"E:\\SharedCo\\IdeaProjects\\ChessServerProj\\src\\assets\\Stockfish\" />\r\n    </key>\r\n    <key name=\"MoveMembersDialog.RECENTS_KEY\">\r\n      <recent name=\"ver5.server.DB.DB.Table\" />\r\n    </key>\r\n    <key name=\"MoveInnerDialog.RECENTS_KEY\">\r\n      <recent name=\"ver14.SharedClasses.Threads.ErrorHandling\" />\r\n      <recent name=\"ver14.Model.minimax\" />\r\n      <recent name=\"ver13.Tests\" />\r\n      <recent name=\"ver10.SharedClasses.DBActions.Statements\" />\r\n      <recent name=\"ver10.SharedClasses.DBActions.Arg\" />\r\n    </key>\r\n    <key name=\"MoveClassesOrPackagesDialog.RECENTS_KEY\">\r\n      <recent name=\"ver10.SharedClasses.DBActions.Statements\" />\r\n      <recent name=\"ver10.SharedClasses.DBActions\" />\r\n      <recent name=\"ver9\" />\r\n      <recent name=\"ver6.SharedClasses.networking\" />\r\n      <recent name=\"ver5.SharedClasses.networking\" />\r\n    </key>\r\n    <key name=\"CopyClassDialog.RECENTS_KEY\">\r\n      <recent name=\"Global_Classes\" />\r\n      <recent name=\"ver3.model_classes\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"RunManager\" selected=\"Application.Server\">\r\n    <configuration name=\"Location\" type=\"Application\" factoryName=\"Application\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"ver14.SharedClasses.Game.Location\" />\r\n      <module name=\"ChessServerProj\" />\r\n      <option name=\"VM_PARAMETERS\" value=\"-ea\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"ver14.SharedClasses.Game.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"MinimaxTests\" type=\"Application\" factoryName=\"Application\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"ver14.Tests.MinimaxTests\" />\r\n      <module name=\"ChessServerProj\" />\r\n      <option name=\"VM_PARAMETERS\" value=\"-ea\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"ver14.Tests.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"PremovesGenerator\" type=\"Application\" factoryName=\"Application\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"ver14.SharedClasses.Game.moves.PremovesGenerator\" />\r\n      <module name=\"ChessServerProj\" />\r\n      <option name=\"VM_PARAMETERS\" value=\"-ea\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"ver14.SharedClasses.Game.moves.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration default=\"true\" type=\"Application\" factoryName=\"Application\">\r\n      <module name=\"ChessServerProj\" />\r\n      <option name=\"VM_PARAMETERS\" value=\"-ea\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"EvalTests.testRepetition\" type=\"TestNG\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <module name=\"ChessServerProj\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"ver14.Tests.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <option name=\"PACKAGE_NAME\" value=\"ver14.Tests\" />\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"ver14.Tests.EvalTests\" />\r\n      <option name=\"METHOD_NAME\" value=\"testRepetition\" />\r\n      <option name=\"TEST_OBJECT\" value=\"METHOD\" />\r\n      <properties />\r\n      <listeners />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"MoveGenerationTest.annotation\" type=\"TestNG\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <module name=\"ChessServerProj\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"ver14.Tests.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <option name=\"PACKAGE_NAME\" value=\"ver14.Tests\" />\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"ver14.Tests.MoveGenerationTest\" />\r\n      <option name=\"METHOD_NAME\" value=\"annotation\" />\r\n      <option name=\"TEST_OBJECT\" value=\"METHOD\" />\r\n      <properties />\r\n      <listeners />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <list>\r\n      <item itemvalue=\"Application.Server\" />\r\n      <item itemvalue=\"Application.MinimaxTests\" />\r\n      <item itemvalue=\"Application.PremovesGenerator\" />\r\n      <item itemvalue=\"Application.Location\" />\r\n      <item itemvalue=\"TestNG.Tests\" />\r\n      <item itemvalue=\"TestNG.MoveGenerationTest.perft\" />\r\n      <item itemvalue=\"TestNG.MoveGenerationTest.annotation\" />\r\n      <item itemvalue=\"TestNG.EvalTests.testRepetition\" />\r\n    </list>\r\n    <recent_temporary>\r\n      <list>\r\n        <item itemvalue=\"TestNG.EvalTests.testRepetition\" />\r\n        <item itemvalue=\"Application.MinimaxTests\" />\r\n        <item itemvalue=\"TestNG.MoveGenerationTest.annotation\" />\r\n        <item itemvalue=\"Application.Location\" />\r\n        <item itemvalue=\"Application.PremovesGenerator\" />\r\n      </list>\r\n    </recent_temporary>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"c8b696c4-dc4a-459e-b95c-014fc448a61e\" name=\"Changes\" comment=\"\" />\r\n      <created>1636632021405</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1636632021405</updated>\r\n    </task>\r\n    <task id=\"LOCAL\u200E00001\" summary=\"created error handling\">\r\n      <created>1647589157621</created>\r\n      <option name=\"number\" value=\"LOCAL\u200E00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL\u200E00001\" />\r\n      <updated>1647589157621</updated>\r\n    </task>\r\n    <task id=\"LOCAL\u200E00002\" summary=\"created error handling\">\r\n      <created>1647608263579</created>\r\n      <option name=\"number\" value=\"LOCAL\u200E00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL\u200E00002\" />\r\n      <updated>1647608263579</updated>\r\n    </task>\r\n    <task id=\"LOCAL\u200E00003\" summary=\"fixed Location\">\r\n      <created>1647698466699</created>\r\n      <option name=\"number\" value=\"LOCAL\u200E00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL\u200E00003\" />\r\n      <updated>1647698466699</updated>\r\n    </task>\r\n    <task id=\"LOCAL\u200E00004\" summary=\"di\">\r\n      <created>1648669985922</created>\r\n      <option name=\"number\" value=\"LOCAL\u200E00004\" />\r\n      <option name=\"presentableId\" value=\"LOCAL\u200E00004\" />\r\n      <updated>1648669985922</updated>\r\n    </task>\r\n    <task id=\"LOCAL\u200E00005\" summary=\"FIXED THAT FREAKING LOCATION BUG (it was normal perspective in Direction)\">\r\n      <created>1648870495253</created>\r\n      <option name=\"number\" value=\"LOCAL\u200E00005\" />\r\n      <option name=\"presentableId\" value=\"LOCAL\u200E00005\" />\r\n      <updated>1648870495253</updated>\r\n    </task>\r\n    <task id=\"LOCAL\u200E00006\" summary=\"SidePanel mainly\">\r\n      <created>1648943060219</created>\r\n      <option name=\"number\" value=\"LOCAL\u200E00006\" />\r\n      <option name=\"presentableId\" value=\"LOCAL\u200E00006\" />\r\n      <updated>1648943060219</updated>\r\n    </task>\r\n    <task id=\"LOCAL\u200E00007\" summary=\"הגשה\">\r\n      <created>1649114338469</created>\r\n      <option name=\"number\" value=\"LOCAL\u200E00007\" />\r\n      <option name=\"presentableId\" value=\"LOCAL\u200E00007\" />\r\n      <updated>1649114338469</updated>\r\n    </task>\r\n    <task id=\"LOCAL\u200E00008\" summary=\"done profile pic\">\r\n      <created>1649549770084</created>\r\n      <option name=\"number\" value=\"LOCAL\u200E00008\" />\r\n      <option name=\"presentableId\" value=\"LOCAL\u200E00008\" />\r\n      <updated>1649549770084</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"9\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State>\r\n              <option name=\"FILTERS\">\r\n                <map>\r\n                  <entry key=\"branch\">\r\n                    <value>\r\n                      <list>\r\n                        <option value=\"Error_Handling\" />\r\n                      </list>\r\n                    </value>\r\n                  </entry>\r\n                </map>\r\n              </option>\r\n            </State>\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <option name=\"ADD_EXTERNAL_FILES_SILENTLY\" value=\"true\" />\r\n    <MESSAGE value=\"created error handling\" />\r\n    <MESSAGE value=\"fixed Location\" />\r\n    <MESSAGE value=\" v\" />\r\n    <MESSAGE value=\"di\" />\r\n    <MESSAGE value=\"FIXED THAT FREAKING LOCATION BUG (it was normal perspective in Direction)\" />\r\n    <MESSAGE value=\"SidePanel mainly\" />\r\n    <MESSAGE value=\"הגשה\" />\r\n    <MESSAGE value=\"done profile pic\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"done profile pic\" />\r\n  </component>\r\n  <component name=\"XDebuggerManager\">\r\n    <breakpoint-manager>\r\n      <breakpoints>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.lang.NullPointerException\" package=\"java.lang\" />\r\n          <option name=\"timeStamp\" value=\"1\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.io.NotSerializableException\" package=\"java.io\" />\r\n          <option name=\"timeStamp\" value=\"2\" />\r\n        </breakpoint>\r\n        <breakpoint type=\"java-exception\">\r\n          <properties class=\"java.lang.AssertionError\" package=\"java.lang\">\r\n            <option name=\"NOTIFY_CAUGHT\" value=\"false\" />\r\n          </properties>\r\n          <option name=\"timeStamp\" value=\"8\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.util.EmptyStackException\" package=\"java.util\" />\r\n          <option name=\"timeStamp\" value=\"48\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.net.SocketException\" package=\"java.net\">\r\n            <option name=\"NOTIFY_CAUGHT\" value=\"false\" />\r\n          </properties>\r\n          <option name=\"timeStamp\" value=\"78\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.lang.Error\" package=\"java.lang\">\r\n            <option name=\"NOTIFY_CAUGHT\" value=\"false\" />\r\n          </properties>\r\n          <option name=\"timeStamp\" value=\"87\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"net.ucanaccess.jdbc.UcanaccessSQLException\" package=\"net.ucanaccess.jdbc\" />\r\n          <option name=\"timeStamp\" value=\"101\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.lang.IllegalArgumentException\" package=\"java.lang\">\r\n            <option name=\"NOTIFY_CAUGHT\" value=\"false\" />\r\n          </properties>\r\n          <option name=\"timeStamp\" value=\"104\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.lang.ArrayIndexOutOfBoundsException\" package=\"java.lang\">\r\n            <option name=\"NOTIFY_CAUGHT\" value=\"false\" />\r\n          </properties>\r\n          <option name=\"timeStamp\" value=\"105\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.net.SocketTimeoutException\" package=\"java.net\" />\r\n          <option name=\"timeStamp\" value=\"106\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.lang.ClassCastException\" package=\"java.lang\" />\r\n          <option name=\"timeStamp\" value=\"142\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.io.InvalidClassException\" package=\"java.io\" />\r\n          <option name=\"timeStamp\" value=\"144\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.io.StreamCorruptedException\" package=\"java.io\" />\r\n          <option name=\"timeStamp\" value=\"145\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.io.UTFDataFormatException\" package=\"java.io\" />\r\n          <option name=\"timeStamp\" value=\"146\" />\r\n        </breakpoint>\r\n        <breakpoint type=\"java-exception\">\r\n          <properties class=\"java.lang.RuntimeException\" package=\"java.lang\">\r\n            <option name=\"NOTIFY_CAUGHT\" value=\"false\" />\r\n          </properties>\r\n          <option name=\"timeStamp\" value=\"151\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.util.ConcurrentModificationException\" package=\"java.util\">\r\n            <option name=\"NOTIFY_CAUGHT\" value=\"false\" />\r\n          </properties>\r\n          <option name=\"timeStamp\" value=\"154\" />\r\n        </breakpoint>\r\n        <breakpoint enabled=\"true\" type=\"java-exception\">\r\n          <properties class=\"java.lang.IndexOutOfBoundsException\" package=\"java.lang\">\r\n            <option name=\"NOTIFY_CAUGHT\" value=\"false\" />\r\n          </properties>\r\n          <option name=\"timeStamp\" value=\"157\" />\r\n        </breakpoint>\r\n        <line-breakpoint type=\"java-line\">\r\n          <url>file://$PROJECT_DIR$/src/ver4/model_classes/Minimax.java</url>\r\n          <line>204</line>\r\n          <option name=\"timeStamp\" value=\"19\" />\r\n        </line-breakpoint>\r\n        <line-breakpoint enabled=\"true\" type=\"java-line\">\r\n          <url>file://$PROJECT_DIR$/src/ver7/server/players/PlayerNet.java</url>\r\n          <line>54</line>\r\n          <option name=\"timeStamp\" value=\"155\" />\r\n        </line-breakpoint>\r\n        <line-breakpoint enabled=\"true\" type=\"java-line\">\r\n          <url>file://$PROJECT_DIR$/src/ver13/Model/PiecesBBs.java</url>\r\n          <line>45</line>\r\n          <option name=\"timeStamp\" value=\"164\" />\r\n        </line-breakpoint>\r\n      </breakpoints>\r\n    </breakpoint-manager>\r\n    <pin-to-top-manager>\r\n      <pinned-members>\r\n        <PinnedItemInfo parentTag=\"ver14.SharedClasses.networking.AppSocket\" memberName=\"msgSocket\" />\r\n        <PinnedItemInfo parentTag=\"java.lang.AssertionError\" memberName=\"cause\" />\r\n      </pinned-members>\r\n    </pin-to-top-manager>\r\n    <watches-manager>\r\n      <configuration name=\"TestNG\">\r\n        <watch expression=\"print();\" language=\"JAVA\" />\r\n      </configuration>\r\n      <configuration name=\"Application\">\r\n        <watch expression=\"player\" language=\"JAVA\" />\r\n        <watch expression=\"ErrorHandler.dontThrowIds\" language=\"JAVA\" />\r\n        <watch expression=\"StrUtils.clean(row[0])\" language=\"JAVA\" />\r\n        <watch expression=\"new String(value)\" language=\"JAVA\" />\r\n        <watch expression=\"getElapsed()\" language=\"JAVA\" />\r\n        <watch expression=\"StrUtils.createTimeStr(moveSearchTimeout)\" language=\"JAVA\" custom=\"ver14.SharedClasses.Utils.StrUtils\" />\r\n        <watch expression=\"generateAllMoves()\" language=\"JAVA\" />\r\n      </configuration>\r\n    </watches-manager>\r\n  </component>\r\n  <component name=\"XSLT-Support.FileAssociations.UIState\">\r\n    <expand />\r\n    <select />\r\n  </component>\r\n  <component name=\"com.intellij.coverage.CoverageDataManagerImpl\">\r\n    <SUITE FILE_PATH=\"coverage/ChessServerProj$Server.ic\" NAME=\"Server Coverage Results\" MODIFIED=\"1649556899605\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"idea\" COVERAGE_BY_TEST_ENABLED=\"false\" COVERAGE_TRACING_ENABLED=\"false\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	
+++ b/.idea/workspace.xml	
@@ -10,39 +10,20 @@
   </component>
   <component name="ChangeListManager">
     <list default="true" id="c8b696c4-dc4a-459e-b95c-014fc448a61e" name="Changes" comment="done profile pic">
-      <change beforePath="$PROJECT_DIR$/../ChessClientProj/.idea/runConfigurations/Client.xml" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessClientProj/.idea/runConfigurations/Client.xml" afterDir="false" />
+      <change afterPath="$PROJECT_DIR$/src/ver14/SharedClasses/Threads/ErrorHandling/Context.java" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/../ChessClientProj/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessClientProj/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessClientProj/out/artifacts/ChessClientProj_jar2/ChessClientProj.jar" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessClientProj/out/artifacts/ChessClientProj_jar2/ChessClientProj.jar" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessClientProj/src/ver14/Client.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessClientProj/src/ver14/Client.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessClientProj/src/ver14/Sound/SoundManager.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessClientProj/src/ver14/Sound/SoundManager.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Cards/DialogCard.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Cards/DialogCard.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialog.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialog.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialogs/BackOkInterface.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialogs/BackOkInterface.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialogs/BackOkPnl.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialogs/BackOkPnl.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialogs/GameSelection/Cards/GameCreation/StartFromPosition.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialogs/GameSelection/Cards/GameCreation/StartFromPosition.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialogs/SimpleDialogs/PromotionDialog.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialogs/SimpleDialogs/PromotionDialog.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialogs/SimpleDialogs/SimpleDialog.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessClientProj/src/ver14/view/Dialog/Dialogs/SimpleDialogs/SimpleDialog.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/../ChessClientProj/src/ver14/view/View.java" beforeDir="false" afterPath="$PROJECT_DIR$/../ChessClientProj/src/ver14/view/View.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/.idea/runConfigurations/Server.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/runConfigurations/Server.xml" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/assets/Stockfish/stockfish_14.1_win_x64_avx2/stockfish_14.1_src/src/types.h" beforeDir="false" afterPath="$PROJECT_DIR$/src/assets/Stockfish/stockfish_14.1_win_x64_avx2/stockfish_14.1_src/src/types.h" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/Model/AttackedSquares.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/Model/AttackedSquares.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/Model/Eval/Eval.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/Model/Eval/Eval.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/Model/Model.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/Model/Model.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/Model/MoveGenerator/MoveGenerator.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/Model/MoveGenerator/MoveGenerator.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/SharedClasses/Game/moves/BasicMove.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/SharedClasses/Game/moves/BasicMove.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/SharedClasses/Game/moves/Move.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/SharedClasses/Game/moves/Move.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/SharedClasses/Game/moves/MoveAnnotation.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/SharedClasses/Game/moves/MoveAnnotation.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/SharedClasses/Game/moves/MovesList.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/SharedClasses/Game/moves/MovesList.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/SharedClasses/Game/pieces/PieceType.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/SharedClasses/Game/pieces/PieceType.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/SharedClasses/Utils/StrUtils.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/SharedClasses/Utils/StrUtils.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/SharedClasses/messages/Message.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/SharedClasses/messages/Message.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/ver14/DB/DB.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/DB/DB.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/ver14/Server.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/Server.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/ver14/SharedClasses/Threads/ErrorHandling/ContextType.java" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorContext.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorContext.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorHandler.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorHandler.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorManager.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorManager.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/ver14/SharedClasses/Threads/ErrorHandling/ErrorType.java" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/ver14/SharedClasses/Threads/ErrorHandling/MyError.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/SharedClasses/Threads/ErrorHandling/MyError.java" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/src/ver14/SharedClasses/networking/AppSocket.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/SharedClasses/networking/AppSocket.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/SharedClasses/networking/MessagesHandler.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/SharedClasses/networking/MessagesHandler.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/Tests/EvalTests.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/Tests/EvalTests.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/Tests/MoveGenerationTest.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/Tests/MoveGenerationTest.java" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/src/ver14/game/Game.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/game/Game.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ver14/players/PlayerNet/PlayerNet.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/players/PlayerNet/PlayerNet.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/ver14/players/PlayerAI/PlayerAI.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/ver14/players/PlayerAI/PlayerAI.java" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
Index: src/ver14/game/Game.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ver14.game;\r\n\r\nimport ver14.Model.Model;\r\nimport ver14.Model.MoveGenerator.GenerationSettings;\r\nimport ver14.Model.MoveGenerator.MoveGenerator;\r\nimport ver14.SharedClasses.Callbacks.Callback;\r\nimport ver14.SharedClasses.Game.GameSettings;\r\nimport ver14.SharedClasses.Game.GameTime;\r\nimport ver14.SharedClasses.Game.PlayerColor;\r\nimport ver14.SharedClasses.Game.SavedGames.EstablishedGameInfo;\r\nimport ver14.SharedClasses.Game.SavedGames.UnfinishedGame;\r\nimport ver14.SharedClasses.Game.evaluation.GameStatus;\r\nimport ver14.SharedClasses.Game.moves.Move;\r\nimport ver14.SharedClasses.Game.moves.MovesList;\r\nimport ver14.SharedClasses.Question;\r\nimport ver14.SharedClasses.Threads.ErrorHandling.ErrorType;\r\nimport ver14.SharedClasses.Threads.ErrorHandling.MyError;\r\nimport ver14.SharedClasses.ui.GameView;\r\nimport ver14.players.Player;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.Random;\r\nimport java.util.Stack;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\n\r\n/**\r\n * Game.\r\n * ---------------------------------------------------------------------------\r\n * by Ilan Peretz (ilanperets@gmail.com)  10/11/2021\r\n */\r\n\r\n//askilan move disconnected/resigned/... to game session\r\npublic class Game {\r\n    public static final int ROWS = 8;\r\n    public static final int COLS = 8;\r\n    public static boolean showGameView = false;\r\n    private final GameSession session;\r\n    private final Player gameCreator, p2;\r\n    private final GameSettings originalSettings;\r\n    private final GameView gameView;\r\n    private Model model;\r\n    private Stack<Move> moveStack;\r\n    private GameSettings gameSettings;\r\n    private GameTime gameTime;\r\n    private Player currentPlayer;\r\n    private boolean isReadingMove = false;\r\n    private PlayerColor creatorColor = null;\r\n    private boolean clearMoveStack = true;\r\n    private GameOverError throwErr = null;\r\n\r\n    public Game(Player gameCreator, Player p2, GameSettings gameSettings, GameSession session) {\r\n        this.session = session;\r\n        this.gameCreator = gameCreator;\r\n        this.p2 = p2;\r\n\r\n        this.originalSettings = new GameSettings(gameSettings);\r\n        this.moveStack = new Stack<>();\r\n        this.model = new Model();\r\n        this.gameView = showGameView ? new GameView() : null;\r\n        setPartners();\r\n    }\r\n\r\n    private void setPartners() {\r\n        gameCreator.setPartner(p2);\r\n        p2.setPartner(gameCreator);\r\n    }\r\n\r\n    public EstablishedGameInfo getCurrentGameState() {\r\n        Player fakeCurrent = currentPlayer == null ? gameCreator : currentPlayer;\r\n\r\n        return new UnfinishedGame(session.ID(),\r\n                gameCreator.getUsername(),\r\n                originalSettings,\r\n                p2.getUsername(),\r\n                fakeCurrent.getPlayerColor(),\r\n                fakeCurrent.getUsername(),\r\n                moveStack);\r\n    }\r\n\r\n    public GameSettings getGameSettings() {\r\n        return gameSettings;\r\n    }\r\n\r\n    public Player getGameCreator() {\r\n        return gameCreator;\r\n    }\r\n\r\n    public GameTime getGameTime() {\r\n        return gameTime;\r\n    }\r\n\r\n    public Model getModel() {\r\n        return model;\r\n    }\r\n\r\n    public GameStatus startNewGame() {\r\n        this.moveStack = new Stack<>();\r\n        this.model = new Model();\r\n        initGame();\r\n        return runGame();\r\n    }\r\n\r\n    private void initGame() {\r\n        if (clearMoveStack)\r\n            moveStack.clear();\r\n        else\r\n            clearMoveStack = true;\r\n        gameSettings = new GameSettings(originalSettings);\r\n        model.setup(gameSettings.getFen());\r\n        assignColors();\r\n        setCurrentPlayer();\r\n        gameTime = new GameTime(gameSettings.getTimeFormat());\r\n        initPlayersGames();\r\n\r\n        session.log(\"Starting game \" + this);\r\n\r\n        updateDebugView();\r\n    }\r\n\r\n    private GameStatus runGame() {\r\n        GameStatus gameOverStatus;\r\n        while (true) {\r\n            GameStatus gameStatus = playTurn();\r\n            if (gameStatus.isGameOver()) {\r\n                gameOverStatus = gameStatus;\r\n                break;\r\n            }\r\n            switchTurn();\r\n        }\r\n        onGameOver();\r\n        session.log(\"game over. \" + gameOverStatus);\r\n        return gameOverStatus;\r\n    }\r\n\r\n    private void assignColors() {\r\n        PlayerColor creatorClr;\r\n        if (creatorColor != null) {\r\n            creatorClr = creatorColor;\r\n        } else if (gameSettings != null && gameSettings.getPlayerToMove() != PlayerColor.NO_PLAYER) {\r\n            creatorClr = gameSettings.getPlayerToMove();\r\n        } else {\r\n            creatorClr = new Random().nextBoolean() ? PlayerColor.WHITE : PlayerColor.BLACK;\r\n        }\r\n        gameCreator.setPlayerColor(creatorClr);\r\n        p2.setPlayerColor(creatorClr.getOpponent());\r\n    }\r\n\r\n    private void setCurrentPlayer() {\r\n        currentPlayer = getCurrentPlayer();\r\n    }\r\n\r\n    private void initPlayersGames() {\r\n        forEachPlayer(p -> p.initGame(this));\r\n    }\r\n\r\n    private void updateDebugView() {\r\n        if (this.gameView != null) {\r\n            this.gameView.update(model.getLogicBoard());\r\n        }\r\n    }\r\n\r\n    private GameStatus playTurn() {\r\n//        gameTime.startRunning(currentPlayer.getPlayerColor());\r\n        currentPlayer.getPartner().waitTurn();\r\n        try {\r\n            Move move = getMove();\r\n            GameStatus status = makeMove(move);\r\n            checkThrow();\r\n            return status;\r\n        } catch (GameOverError error) {\r\n            return error.gameOverStatus;\r\n        }\r\n    }\r\n\r\n    private void switchTurn() {\r\n        currentPlayer = currentPlayer.getPartner();\r\n        gameTime.startRunning(currentPlayer.getPlayerColor());\r\n        updateDebugView();\r\n    }\r\n\r\n    private void onGameOver() {\r\n        gameSettings.setPlayerToMove(currentPlayer.getPlayerColor());\r\n        gameSettings.setFen(model.genFenStr());\r\n    }\r\n\r\n    public Player getCurrentPlayer() {\r\n        return (gameCreator.getPlayerColor() == model.getCurrentPlayer() ? gameCreator : p2);\r\n    }\r\n\r\n    public void forEachPlayer(Callback<Player> callback) {\r\n        callback.callback(gameCreator);\r\n        callback.callback(p2);\r\n    }\r\n\r\n    private Move getMove() {\r\n        try {\r\n            ExecutorService exec = Executors.newSingleThreadExecutor();\r\n            exec.submit(() -> {\r\n                try {\r\n                    Thread.sleep(gameTime.getTimeLeft(currentPlayer.getPlayerColor()));\r\n                    if (!exec.isShutdown())\r\n                        interruptRead(GameStatus.timedOut(currentPlayer.getPlayerColor()));\r\n                } catch (InterruptedException e) {\r\n                }\r\n            });\r\n            checkThrow();\r\n            isReadingMove = true;\r\n            Move move = currentPlayer.getMove();\r\n            isReadingMove = false;\r\n            exec.shutdown();\r\n            exec.shutdownNow();\r\n\r\n            Move finalMove = move;\r\n            move = getMoves().stream().filter(m -> m.strictEquals(finalMove)).findAny().orElse(null);\r\n\r\n            session.log(\"move(%d) from %s: %s\".formatted(moveStack.size() + 1, currentPlayer, move));//+1 bc current one isnt pushed yet\r\n\r\n            return move;\r\n        } catch (PlayerDisconnectedError error) {\r\n            isReadingMove = false;\r\n            throw new GameOverError(GameStatus.playerDisconnected(error.getDisconnectedPlayer().getPlayerColor(), error.disconnectedPlayer.getPartner().isAi()));\r\n        } catch (MyError error) {\r\n            isReadingMove = false;\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    private GameStatus makeMove(Move move) {\r\n        if (move.getThreefoldStatus() == Move.ThreefoldStatus.CLAIMED) {\r\n            return GameStatus.threeFoldRepetition();\r\n        }\r\n\r\n        model.makeMove(move);\r\n        moveStack.push(move);\r\n\r\n        currentPlayer.getPartner().updateByMove(move);\r\n\r\n        return move.getMoveEvaluation().getGameStatus();\r\n    }\r\n\r\n    private void checkThrow() throws GameOverError {\r\n        if (throwErr != null) {\r\n            throw throwErr;\r\n        }\r\n    }\r\n\r\n    void interruptRead(GameStatus status) {\r\n        GameOverError err = new Game.GameOverError(status);\r\n        if (isReadingMove) {\r\n            currentPlayer.interrupt(err);\r\n        } else throwErr = err;\r\n\r\n    }\r\n\r\n    public MovesList getMoves() {\r\n        return MoveGenerator.generateMoves(model, GenerationSettings.annotate).getCleanList();\r\n    }\r\n\r\n    private boolean checkTimeOut() {\r\n        return gameTime.getRunningTime(currentPlayer.getPlayerColor()).didRunOut();\r\n    }\r\n\r\n    public PlayerColor getCreatorColor() {\r\n        return creatorColor;\r\n    }\r\n\r\n    public void setCreatorColor(PlayerColor creatorColor) {\r\n        this.creatorColor = creatorColor;\r\n    }\r\n\r\n    public Stack<Move> getMoveStack() {\r\n        return moveStack;\r\n    }\r\n\r\n    public void setMoveStack(Stack<Move> moveStack) {\r\n        this.moveStack = moveStack;\r\n        clearMoveStack = false;\r\n    }\r\n\r\n    public void parallelForEachPlayer(Callback<Player> callback) {\r\n        Arrays.stream(getPlayers()).parallel().forEach(callback::callback);\r\n    }\r\n\r\n    public Player[] getPlayers() {\r\n        return new Player[]{gameCreator, p2};\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return \"Game{\" +\r\n                \"p1=\" + gameCreator.getUsername() +\r\n                \", p2=\" + p2.getUsername() +\r\n                '}';\r\n    }\r\n\r\n    public void drawOffered(Player player) {\r\n        session.log(player + \" offered a draw\");\r\n        player.getPartner().drawOffered(ans -> {\r\n            session.log(player.getPartner() + \" responded with a \" + ans + \" to the draw offer\");\r\n            if (ans == Question.Answer.ACCEPT) {\r\n                interruptRead(GameStatus.tieByAgreement());\r\n            }\r\n        });\r\n    }\r\n\r\n    public static class PlayerDisconnectedError extends MyError.DisconnectedError {\r\n        private final Player disconnectedPlayer;\r\n\r\n        public PlayerDisconnectedError(Player disconnectedPlayer) {\r\n            this.disconnectedPlayer = disconnectedPlayer;\r\n        }\r\n\r\n        public Player getDisconnectedPlayer() {\r\n            return disconnectedPlayer;\r\n        }\r\n    }\r\n\r\n    public static class GameOverError extends MyError {\r\n\r\n        public final GameStatus gameOverStatus;\r\n\r\n        public GameOverError(GameStatus gameOverStatus) {\r\n            super(ErrorType.UnKnown);\r\n\r\n            this.gameOverStatus = gameOverStatus;\r\n        }\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/ver14/game/Game.java b/src/ver14/game/Game.java
--- a/src/ver14/game/Game.java	
+++ b/src/ver14/game/Game.java	
@@ -13,7 +13,6 @@
 import ver14.SharedClasses.Game.moves.Move;
 import ver14.SharedClasses.Game.moves.MovesList;
 import ver14.SharedClasses.Question;
-import ver14.SharedClasses.Threads.ErrorHandling.ErrorType;
 import ver14.SharedClasses.Threads.ErrorHandling.MyError;
 import ver14.SharedClasses.ui.GameView;
 import ver14.players.Player;
